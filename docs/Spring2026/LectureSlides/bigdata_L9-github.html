<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>bigdata_l9-github ‚Äì Social Data Analysis and Visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-b758ccaa5987ceb1b75504551e579abf.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-956b8a4ec41f03f761f91fad8c3a3e27.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-c2a6d3abc2894eadef3e844b666af903.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-956b8a4ec41f03f761f91fad8c3a3e27.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Social Data Analysis and Visualization</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../schedule.html"> 
<span class="menu-text">Masters Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../schedule_phd.html"> 
<span class="menu-text">PhD Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../install.html"> 
<span class="menu-text">Install R</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/aysedeniz09/IntroCSS"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Getting Started</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Social Data Analysis and Visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Schedule - Masters</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../schedule_phd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Schedule - PhD</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../install.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Install R Studio</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Class Sessions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../sessions/01/session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 1 - Why Computational Social Science?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../sessions/02/session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 2 - Data Collection and Wrangling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../sessions/03/session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 3 - GGPlot and Visualizations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../sessions/04/session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 4 - Computational Research</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../sessions/05/session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 5 - Descriptive Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../sessions/06/session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 6 - Statistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../sessions/07/session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 7 - Dictionary Methods &amp; Word Embeddings</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../sessions/08/session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 8 - Midterm Exam</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../sessions/09/session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 9 - Topic Modeling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../sessions/10/session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 10 - Unsupervised Machine Learning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../sessions/11/session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 11 - Networks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../sessions/12/session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 12 - Online Social Movements</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../sessions/13/session.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Session 13 - From Data to Conclusions</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Resources</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../resources/cheatsheets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Cheatsheets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../resources/datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Datasets</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#text-as-data-topic-modeling" id="toc-text-as-data-topic-modeling" class="nav-link active" data-scroll-target="#text-as-data-topic-modeling">Text as Data: Topic Modeling</a></li>
  <li><a href="#r-exercises" id="toc-r-exercises" class="nav-link" data-scroll-target="#r-exercises">R Exercises</a>
  <ul class="collapse">
  <li><a href="#table-of-contents" id="toc-table-of-contents" class="nav-link" data-scroll-target="#table-of-contents">Table of Contents</a></li>
  <li><a href="#intro-to-topic-modeling" id="toc-intro-to-topic-modeling" class="nav-link" data-scroll-target="#intro-to-topic-modeling">1. Intro to Topic Modeling</a>
  <ul class="collapse">
  <li><a href="#why-use-topic-modeling" id="toc-why-use-topic-modeling" class="nav-link" data-scroll-target="#why-use-topic-modeling">1.1 Why Use Topic Modeling?</a></li>
  <li><a href="#understanding-lda" id="toc-understanding-lda" class="nav-link" data-scroll-target="#understanding-lda">1.2 Understanding LDA</a></li>
  </ul></li>
  <li><a href="#preprocessing-text-data" id="toc-preprocessing-text-data" class="nav-link" data-scroll-target="#preprocessing-text-data">2. Preprocessing Text Data</a>
  <ul class="collapse">
  <li><a href="#load-the-data" id="toc-load-the-data" class="nav-link" data-scroll-target="#load-the-data">2.1 Load the Data</a></li>
  <li><a href="#initial-data-exploration" id="toc-initial-data-exploration" class="nav-link" data-scroll-target="#initial-data-exploration">2.2 Initial Data Exploration</a></li>
  <li><a href="#text-preprocessing" id="toc-text-preprocessing" class="nav-link" data-scroll-target="#text-preprocessing">2.3 Text Preprocessing</a></li>
  <li><a href="#tokenization" id="toc-tokenization" class="nav-link" data-scroll-target="#tokenization">2.4 Tokenization</a></li>
  <li><a href="#term-frequency-filtering-with-tf-idf" id="toc-term-frequency-filtering-with-tf-idf" class="nav-link" data-scroll-target="#term-frequency-filtering-with-tf-idf">2.5 Term Frequency Filtering with TF-IDF</a></li>
  <li><a href="#visualize-top-words" id="toc-visualize-top-words" class="nav-link" data-scroll-target="#visualize-top-words">2.6 Visualize Top Words</a></li>
  <li><a href="#create-document-term-matrix" id="toc-create-document-term-matrix" class="nav-link" data-scroll-target="#create-document-term-matrix">2.7 Create Document-Term Matrix</a></li>
  </ul></li>
  <li><a href="#choosing-the-number-of-topics-k" id="toc-choosing-the-number-of-topics-k" class="nav-link" data-scroll-target="#choosing-the-number-of-topics-k">3. Choosing the Number of Topics (K)</a>
  <ul class="collapse">
  <li><a href="#what-is-topic-coherence" id="toc-what-is-topic-coherence" class="nav-link" data-scroll-target="#what-is-topic-coherence">3.1 What is Topic Coherence?</a></li>
  <li><a href="#types-of-coherence-metrics" id="toc-types-of-coherence-metrics" class="nav-link" data-scroll-target="#types-of-coherence-metrics">3.2 Types of Coherence Metrics</a></li>
  <li><a href="#what-makes-a-good-topic" id="toc-what-makes-a-good-topic" class="nav-link" data-scroll-target="#what-makes-a-good-topic">3.3 What Makes a ‚ÄúGood‚Äù Topic?</a></li>
  <li><a href="#computing-topic-coherence-for-different-k-values" id="toc-computing-topic-coherence-for-different-k-values" class="nav-link" data-scroll-target="#computing-topic-coherence-for-different-k-values">3.4 Computing Topic Coherence for Different K Values</a></li>
  <li><a href="#visualizing-topic-coherence" id="toc-visualizing-topic-coherence" class="nav-link" data-scroll-target="#visualizing-topic-coherence">3.5 Visualizing Topic Coherence</a></li>
  <li><a href="#interpreting-the-results-for-optimal-k" id="toc-interpreting-the-results-for-optimal-k" class="nav-link" data-scroll-target="#interpreting-the-results-for-optimal-k">3.6 Interpreting the Results for optimal K</a></li>
  <li><a href="#choosing-optimal-k" id="toc-choosing-optimal-k" class="nav-link" data-scroll-target="#choosing-optimal-k">3.7 Choosing Optimal K</a></li>
  </ul></li>
  <li><a href="#lda-model" id="toc-lda-model" class="nav-link" data-scroll-target="#lda-model">4. LDA Model</a>
  <ul class="collapse">
  <li><a href="#train-the-lda-model-with-the-optimal-topics" id="toc-train-the-lda-model-with-the-optimal-topics" class="nav-link" data-scroll-target="#train-the-lda-model-with-the-optimal-topics">4.1 Train the LDA Model with the Optimal Topics</a></li>
  <li><a href="#save-your-work" id="toc-save-your-work" class="nav-link" data-scroll-target="#save-your-work">4.2 Save Your Work</a></li>
  <li><a href="#look-inside-the-lda-model" id="toc-look-inside-the-lda-model" class="nav-link" data-scroll-target="#look-inside-the-lda-model">4.3 Look Inside the LDA Model</a></li>
  </ul></li>
  <li><a href="#the-beta-gamma-matrices" id="toc-the-beta-gamma-matrices" class="nav-link" data-scroll-target="#the-beta-gamma-matrices">5. The Beta &amp; Gamma Matrices</a>
  <ul class="collapse">
  <li><a href="#beta-Œ≤-topic-word-probabilities" id="toc-beta-Œ≤-topic-word-probabilities" class="nav-link" data-scroll-target="#beta-Œ≤-topic-word-probabilities">5.1 Beta (Œ≤): Topic-Word Probabilities</a></li>
  <li><a href="#top-words-per-topic---the-beta-Œ≤-matrix-using-tidy" id="toc-top-words-per-topic---the-beta-Œ≤-matrix-using-tidy" class="nav-link" data-scroll-target="#top-words-per-topic---the-beta-Œ≤-matrix-using-tidy">5.2 Top Words per Topic - The Beta (Œ≤) Matrix using Tidy</a></li>
  <li><a href="#top-10-words-per-topic" id="toc-top-10-words-per-topic" class="nav-link" data-scroll-target="#top-10-words-per-topic">5.3 Top 10 Words per Topic</a></li>
  <li><a href="#visualize-top-words-1" id="toc-visualize-top-words-1" class="nav-link" data-scroll-target="#visualize-top-words-1">5.4 Visualize Top Words</a></li>
  <li><a href="#comparing-words-between-topics" id="toc-comparing-words-between-topics" class="nav-link" data-scroll-target="#comparing-words-between-topics">5.5 Comparing Words Between Topics</a></li>
  <li><a href="#visualize-word-comparisons" id="toc-visualize-word-comparisons" class="nav-link" data-scroll-target="#visualize-word-comparisons">5.6 Visualize Word Comparisons</a></li>
  <li><a href="#top-documents-per-topic---the-gamma-Œ≥-matrix-using-tidy" id="toc-top-documents-per-topic---the-gamma-Œ≥-matrix-using-tidy" class="nav-link" data-scroll-target="#top-documents-per-topic---the-gamma-Œ≥-matrix-using-tidy">5.7 Top Documents per Topic - The Gamma (Œ≥) Matrix using Tidy</a></li>
  <li><a href="#visualizing-document-topic-distributions" id="toc-visualizing-document-topic-distributions" class="nav-link" data-scroll-target="#visualizing-document-topic-distributions">5.8 Visualizing Document-Topic Distributions</a></li>
  <li><a href="#finding-representative-documents-for-each-topic" id="toc-finding-representative-documents-for-each-topic" class="nav-link" data-scroll-target="#finding-representative-documents-for-each-topic">5.9 Finding Representative Documents for Each Topic</a></li>
  <li><a href="#examining-representative-document-content" id="toc-examining-representative-document-content" class="nav-link" data-scroll-target="#examining-representative-document-content">5.10 Examining Representative Document Content</a></li>
  <li><a href="#summary-of-representative-documents" id="toc-summary-of-representative-documents" class="nav-link" data-scroll-target="#summary-of-representative-documents">5.11 Summary of Representative Documents</a></li>
  <li><a href="#distribution-of-dominant-topics" id="toc-distribution-of-dominant-topics" class="nav-link" data-scroll-target="#distribution-of-dominant-topics">5.12 Distribution of Dominant Topics</a></li>
  <li><a href="#distribution-of-dominant-topics-1" id="toc-distribution-of-dominant-topics-1" class="nav-link" data-scroll-target="#distribution-of-dominant-topics-1">5.12 Distribution of Dominant Topics</a></li>
  <li><a href="#topics-over-time" id="toc-topics-over-time" class="nav-link" data-scroll-target="#topics-over-time">5.13 Topics Over Time</a></li>
  </ul></li>
  <li><a href="#lecture-9-cheat-sheet-topic-modeling-lda" id="toc-lecture-9-cheat-sheet-topic-modeling-lda" class="nav-link" data-scroll-target="#lecture-9-cheat-sheet-topic-modeling-lda">Lecture 9 Cheat Sheet: Topic Modeling (LDA)</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>





<section id="text-as-data-topic-modeling" class="level1">
<h1>Text as Data: Topic Modeling</h1>
<p>Dr.&nbsp;Ayse D. Lokmanoglu Lecture 9, (B) March 25, (A) March 30</p>
</section>
<section id="r-exercises" class="level1">
<h1>R Exercises</h1>
<section id="table-of-contents" class="level2">
<h2 class="anchored" data-anchor-id="table-of-contents">Table of Contents</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Section</th>
<th>Topic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Intro to Topic Modeling</td>
</tr>
<tr class="even">
<td>1.1</td>
<td>Why Use Topic Modeling?</td>
</tr>
<tr class="odd">
<td>1.2</td>
<td>Understanding LDA</td>
</tr>
<tr class="even">
<td>2</td>
<td>Preprocessing Text Data</td>
</tr>
<tr class="odd">
<td>2.1</td>
<td>Load the Data</td>
</tr>
<tr class="even">
<td>2.2</td>
<td>Initial Data Exploration</td>
</tr>
<tr class="odd">
<td>2.3</td>
<td>Text Preprocessing</td>
</tr>
<tr class="even">
<td>2.3.1</td>
<td>Create Index, Backup Text, and Language Filtering</td>
</tr>
<tr class="odd">
<td>2.3.2</td>
<td>Create Custom Stopwords</td>
</tr>
<tr class="even">
<td>2.4</td>
<td>Tokenization</td>
</tr>
<tr class="odd">
<td>2.5</td>
<td>Term Frequency Filtering with TF-IDF</td>
</tr>
<tr class="even">
<td>2.6</td>
<td>Visualize Top Words</td>
</tr>
<tr class="odd">
<td>2.7</td>
<td>Create Document-Term Matrix</td>
</tr>
<tr class="even">
<td>3</td>
<td>Choosing the Number of Topics (K)</td>
</tr>
<tr class="odd">
<td>3.1</td>
<td>What is Topic Coherence?</td>
</tr>
<tr class="even">
<td>3.2</td>
<td>Types of Coherence Metrics</td>
</tr>
<tr class="odd">
<td>3.3</td>
<td>What Makes a ‚ÄúGood‚Äù Topic?</td>
</tr>
<tr class="even">
<td>3.4</td>
<td>Computing Topic Coherence for Different K Values</td>
</tr>
<tr class="odd">
<td>3.5</td>
<td>Visualizing Topic Coherence</td>
</tr>
<tr class="even">
<td>3.5.1</td>
<td>Coherence Across K Values</td>
</tr>
<tr class="odd">
<td>3.5.2</td>
<td>Coherence Decline from Optimal K</td>
</tr>
<tr class="even">
<td>3.6</td>
<td>Interpreting the Results for Optimal K</td>
</tr>
<tr class="odd">
<td>3.7</td>
<td>Choosing Optimal K</td>
</tr>
<tr class="even">
<td>4</td>
<td>LDA Model</td>
</tr>
<tr class="odd">
<td>4.1</td>
<td>Train the LDA Model with the Optimal Topics</td>
</tr>
<tr class="even">
<td>4.2</td>
<td>Save Your Work</td>
</tr>
<tr class="odd">
<td>4.3</td>
<td>Look Inside the LDA Model</td>
</tr>
<tr class="even">
<td>5</td>
<td>The Beta &amp; Gamma Matrices</td>
</tr>
<tr class="odd">
<td>5.1</td>
<td>Beta (Œ≤): Topic-Word Probabilities</td>
</tr>
<tr class="even">
<td>5.2</td>
<td>Top Words per Topic - The Beta (Œ≤) Matrix using Tidy</td>
</tr>
<tr class="odd">
<td>5.3</td>
<td>Top 10 Words per Topic</td>
</tr>
<tr class="even">
<td>5.4</td>
<td>Visualize Top Words</td>
</tr>
<tr class="odd">
<td>5.5</td>
<td>Comparing Words Between Topics</td>
</tr>
<tr class="even">
<td>5.6</td>
<td>Visualize Word Comparisons</td>
</tr>
<tr class="odd">
<td>5.7</td>
<td>Top Documents per Topic - The Gamma (Œ≥) Matrix using Tidy</td>
</tr>
<tr class="even">
<td>5.8</td>
<td>Visualizing Document-Topic Distributions</td>
</tr>
<tr class="odd">
<td>5.9</td>
<td>Finding Representative Documents for Each Topic</td>
</tr>
<tr class="even">
<td>5.10</td>
<td>Examining Representative Document Content</td>
</tr>
<tr class="odd">
<td>5.11</td>
<td>Summary of Representative Documents</td>
</tr>
<tr class="even">
<td>5.12</td>
<td>Distribution of Dominant Topics</td>
</tr>
<tr class="odd">
<td>5.13</td>
<td>Topics Over Time</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>ALWAYS</strong> Let‚Äôs load our libraries</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)    <span class="co"># Data manipulation and visualization</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)     <span class="co"># Text mining using tidy data principles</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)      <span class="co"># Data visualization (part of tidyverse)</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stopwords)    <span class="co"># Stopword lists in multiple languages</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)        <span class="co"># Data manipulation (part of tidyverse)</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)     <span class="co"># Quantitative text analysis</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(topicmodels)  <span class="co"># Topic modeling (LDA, CTM)</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(topicdoc)     <span class="co"># Topic coherence metrics</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="intro-to-topic-modeling" class="level2">
<h2 class="anchored" data-anchor-id="intro-to-topic-modeling">1. Intro to Topic Modeling</h2>
<p>Topic modeling is an unsupervised machine learning technique that identifies latent themes in a collection of text documents. The most widely used approach is Latent Dirichlet Allocation (LDA), which assumes each document is a mixture of topics, and each topic is a mixture of words.</p>
<section id="why-use-topic-modeling" class="level3">
<h3 class="anchored" data-anchor-id="why-use-topic-modeling">1.1 Why Use Topic Modeling?</h3>
<ul>
<li>Helps uncover hidden structure in large text corpora</li>
<li>Organizes vast amounts of text into interpretable themes</li>
<li>Useful for content analysis, social media monitoring, and recommendation systems</li>
<li>Allows exploration of what people are discussing without pre-defined categories</li>
</ul>
<p><img src="https://www.tidytextmining.com/images/tmwr_0601.png" class="img-fluid"></p>
<p><em>image from: <a href="https://www.tidytextmining.com/topicmodeling" class="uri">https://www.tidytextmining.com/topicmodeling</a></em></p>
</section>
<section id="understanding-lda" class="level3">
<h3 class="anchored" data-anchor-id="understanding-lda">1.2 Understanding LDA</h3>
<p><strong>Latent Dirichlet Allocation (LDA)</strong> is one of the most widely used algorithms for topic modeling. Without delving into the complex mathematics behind it, we can conceptualize LDA through two key principles:</p>
<ol type="1">
<li><strong>Every document is a mixture of topics.</strong>
<ul>
<li>Each document contains words from multiple topics in different proportions.</li>
<li>For instance, in a model with two topics, we could say:
<ul>
<li>‚ÄúDocument 1 is 80% Topic A and 20% Topic B.‚Äù</li>
<li>‚ÄúDocument 2 is 40% Topic A and 60% Topic B.‚Äù</li>
</ul></li>
</ul></li>
<li><strong>Every topic is a mixture of words.</strong>
<ul>
<li>Each topic consists of words that commonly appear together.</li>
<li>For example, in a two-topic model focused on K-pop:
<ul>
<li>The ‚Äúidol performance‚Äù topic might include words like <em>dance</em>, <em>stage</em>, <em>music</em>, and <em>concert</em>.</li>
<li>The ‚Äúfandom culture‚Äù topic might contain words like <em>fans</em>, <em>streaming</em>, <em>voting</em>, and <em>billboard</em>.</li>
<li>Some words, like <em>debut</em>, may appear in both topics but with different frequencies.</li>
</ul></li>
</ul></li>
</ol>
<p>LDA uses a probabilistic approach to simultaneously determine:</p>
<ul>
<li><p>The composition of topics within each document</p></li>
<li><p>The key words that define each topic</p></li>
</ul>
<p>This method enables us to uncover hidden themes in large text datasets without prior labeling.</p>
<hr>
</section>
</section>
<section id="preprocessing-text-data" class="level2">
<h2 class="anchored" data-anchor-id="preprocessing-text-data">2. Preprocessing Text Data</h2>
<section id="load-the-data" class="level3">
<h3 class="anchored" data-anchor-id="load-the-data">2.1 Load the Data</h3>
<p>We‚Äôll use Reddit comments about K-pop Demon Hunters. This dataset contains community discussions, reactions, and conversations about the show.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"kpop_comments_forclass.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check structure</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## spc_tbl_ [23,270 √ó 18] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ text            : chr [1:23270] "kind of a tangent but kind of a telling tidbit from japan...\n\n\nuniversal studio japan does these \"hybe x us"| __truncated__ "Thank you for submitting to r/kpop! Unfortunately, your post has been removed for the following reason(s):\n\n*"| __truncated__ "Thank you for submitting to r/kpop! Unfortunately, your post has been removed for the following reason(s):\n\n*"| __truncated__ "Put character skin out, I wanted to see NingNing tapped out Winter" ...
##  $ id              : chr [1:23270] "n0o7gct" "n0o7ocv" "n0o94v4" "n0o984c" ...
##  $ author          : chr [1:23270] "xxqbsxx" "kpop-ModTeam" "kpop-ModTeam" "Sunasoo" ...
##  $ link_id         : chr [1:23270] "t3_1kf7rre" "t3_1loneox" "t3_1lonl0c" "t3_1lom8cm" ...
##  $ parent_id       : chr [1:23270] "t3_1kf7rre" "t3_1loneox" "t3_1lonl0c" "t3_1lom8cm" ...
##  $ created_utc     : num [1:23270] 1.75e+09 1.75e+09 1.75e+09 1.75e+09 1.75e+09 ...
##  $ score           : num [1:23270] 71 1 1 9 1 10 5 1 2 30 ...
##  $ downs           : num [1:23270] 0 0 0 0 0 0 0 0 0 0 ...
##  $ likes           : logi [1:23270] NA NA NA NA NA NA ...
##  $ controversiality: num [1:23270] 0 0 0 0 0 0 0 0 0 0 ...
##  $ gilded          : num [1:23270] 0 0 0 0 0 0 0 0 0 0 ...
##  $ subreddit       : chr [1:23270] "kpop" "kpop" "kpop" "kpop" ...
##  $ permalink       : chr [1:23270] "/r/kpop/comments/1kf7rre/megathread_22_hybe_ador_mhj_we_reach_one_year_of/n0o7gct/" "/r/kpop/comments/1loneox/bighit_musics_new_korean_boy_band_spotted_filming/n0o7ocv/" "/r/kpop/comments/1lonl0c/guys_i_need_help_finding_this_song/n0o94v4/" "/r/kpop/comments/1lom8cm/aespa_street_fighter_6_x_aespa_special_collab/n0o984c/" ...
##  $ datetime        : POSIXct[1:23270], format: "2025-07-01 00:02:08" "2025-07-01 00:03:25" ...
##  $ date            : Date[1:23270], format: "2025-07-01" "2025-07-01" ...
##  $ year            : num [1:23270] 2025 2025 2025 2025 2025 ...
##  $ month           : num [1:23270] 7 7 7 7 7 7 7 7 7 7 ...
##  $ text_length     : num [1:23270] 818 561 519 66 469 ...
##  - attr(*, "spec")=
##   .. cols(
##   ..   text = col_character(),
##   ..   id = col_character(),
##   ..   author = col_character(),
##   ..   link_id = col_character(),
##   ..   parent_id = col_character(),
##   ..   created_utc = col_double(),
##   ..   score = col_double(),
##   ..   downs = col_double(),
##   ..   likes = col_logical(),
##   ..   controversiality = col_double(),
##   ..   gilded = col_double(),
##   ..   subreddit = col_character(),
##   ..   permalink = col_character(),
##   ..   datetime = col_datetime(format = ""),
##   ..   date = col_date(format = ""),
##   ..   year = col_double(),
##   ..   month = col_double(),
##   ..   text_length = col_double()
##   .. )
##  - attr(*, "problems")=&lt;externalptr&gt;</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## # A tibble: 6 √ó 18
##   text              id    author link_id parent_id created_utc score downs likes
##   &lt;chr&gt;             &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;
## 1 "kind of a tange‚Ä¶ n0o7‚Ä¶ xxqbs‚Ä¶ t3_1kf‚Ä¶ t3_1kf7r‚Ä¶  1751328128    71     0 NA   
## 2 "Thank you for s‚Ä¶ n0o7‚Ä¶ kpop-‚Ä¶ t3_1lo‚Ä¶ t3_1lone‚Ä¶  1751328205     1     0 NA   
## 3 "Thank you for s‚Ä¶ n0o9‚Ä¶ kpop-‚Ä¶ t3_1lo‚Ä¶ t3_1lonl‚Ä¶  1751328709     1     0 NA   
## 4 "Put character s‚Ä¶ n0o9‚Ä¶ Sunas‚Ä¶ t3_1lo‚Ä¶ t3_1lom8‚Ä¶  1751328740     9     0 NA   
## 5 "Thank you for s‚Ä¶ n0o9‚Ä¶ kpop-‚Ä¶ t3_1lo‚Ä¶ t3_1lonk‚Ä¶  1751328826     1     0 NA   
## 6 "Where‚Äôs the Aku‚Ä¶ n0oa‚Ä¶ Optio‚Ä¶ t3_1lo‚Ä¶ t3_1lom8‚Ä¶  1751329139    10     0 NA   
## # ‚Ñπ 9 more variables: controversiality &lt;dbl&gt;, gilded &lt;dbl&gt;, subreddit &lt;chr&gt;,
## #   permalink &lt;chr&gt;, datetime &lt;dttm&gt;, date &lt;date&gt;, year &lt;dbl&gt;, month &lt;dbl&gt;,
## #   text_length &lt;dbl&gt;</code></pre>
</section>
<section id="initial-data-exploration" class="level3">
<h3 class="anchored" data-anchor-id="initial-data-exploration">2.2 Initial Data Exploration</h3>
<p>Let‚Äôs understand what we‚Äôre working with:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How many comments?</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] 23270</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Date range</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(data<span class="sc">$</span>date)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] "2025-07-01" "2025-07-31"</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Score distribution</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data<span class="sc">$</span>score)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##  -85.00    2.00    7.00   19.98   21.00 1779.00</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Text length distribution</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data<span class="sc">$</span>text_length)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    51.0    89.0   152.0   274.3   308.0  9673.0</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Look at a few comments</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data<span class="sc">$</span>text, <span class="dv">5</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] "kind of a tangent but kind of a telling tidbit from japan...\n\n\nuniversal studio japan does these \"hybe x usj summer dance night\" thing in july and aug where they play hybe artists music for ppl to dance to&nbsp;\n\n\nits an official event and i think &amp;team actually came to perform live last year\n\n\nyou can search on socials for the setlist, but this year theyve completely cut nj from the lineup (eta and supershy were on there last year)\n\n\ntokkis may use this to cry mistreatment and erasure, but how could they promote a group that refuses to acknowledge their companyü§∑\n\n\nand tbh the setlist with illit and tws added this year does not look lacking at all, such is the fast paced world of kpop&nbsp;\n\n\ni hope the members and their fans realize that the world wont be waiting for them but just move on and find the next big thing"
## [2] "Thank you for submitting to r/kpop! Unfortunately, your post has been removed for the following reason(s):\n\n* Submissions that are not substantially newsworthy should be posted to the [artist's subreddit](https://www.reddit.com/r/kpop/wiki/relatedsubs#wiki_group.2Fartist_subreddits.3A). Please check each subreddit's rules before posting.\n\nIf you have any questions regarding the ruleset of r/kpop, please refer to the [Rules](https://www.reddit.com/r/kpop/wiki/rules) or [message the moderators](https://www.reddit.com/message/compose/?to=/r/kpop). Thank you!"                                                                                                                                                                                                                                                                                  
## [3] "Thank you for submitting to r/kpop! Unfortunately, your post has been removed for the following reason(s):\n\n* Please go to r/kpophelp and use the **Monthly 'Who's this?' &amp; Merch Authentication Post** to get help for your question. You should be able to find it pinned to the top of that subreddit.\n\nIf you have any questions regarding the ruleset of r/kpop, please refer to the [Rules](https://www.reddit.com/r/kpop/wiki/rules) or [message the moderators](https://www.reddit.com/message/compose/?to=/r/kpop). Thank you!"                                                                                                                                                                                                                                                                                                                            
## [4] "Put character skin out, I wanted to see NingNing tapped out Winter"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
## [5] "Thank you for submitting to r/kpop! Unfortunately, your post has been removed for the following reason(s):\n\n* Your submission is off-topic for this subreddit.  All submissions must be directly relevant to Korean music, artists, companies, or fans.\n\nIf you have any questions regarding the ruleset of r/kpop, please refer to the [Rules](https://www.reddit.com/r/kpop/wiki/rules) or [message the moderators](https://www.reddit.com/message/compose/?to=/r/kpop). Thank you!"</code></pre>
<hr>
</section>
<section id="text-preprocessing" class="level3">
<h3 class="anchored" data-anchor-id="text-preprocessing">2.3 Text Preprocessing</h3>
<p>Before we can run topic models, we need to clean and prepare our text data.</p>
<section id="create-index-backup-text-and-language-filtering" class="level4">
<h4 class="anchored" data-anchor-id="create-index-backup-text-and-language-filtering">2.3.1 Create Index, Backup Text, and Language Filtering</h4>
<p><strong>Important:</strong> We‚Äôll create new objects at each step so we don‚Äôt lose our original data.</p>
<p><strong>Why these steps matter:</strong></p>
<ol type="1">
<li><strong>Language filtering:</strong> Reddit has international users, so we remove non-English comments</li>
<li><strong>Duplicate removal:</strong> Same comment posted multiple times (e.g., copypasta, bots)</li>
<li><strong>Creating new objects:</strong> We keep <code>data</code>, <code>data2</code>, <code>data3</code> so we can backtrack if needed</li>
</ol>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create document index</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>comment_index <span class="ot">&lt;-</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(data))</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Backup original text</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>textBU <span class="ot">&lt;-</span> data<span class="sc">$</span>text</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>CLD2<span class="ot">&lt;-</span>cld2<span class="sc">::</span><span class="fu">detect_language</span>(data<span class="sc">$</span>text) <span class="do">## a package by Google</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data<span class="sc">$</span>CLD2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## 
##    en    es    fr    id    it    ko    ms    pt    sk    tl    vi 
## 23133     9     3     2     3    25     1     2     1     1     1</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span>  <span class="fu">filter</span>(CLD2<span class="sc">==</span><span class="st">"en"</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>data3 <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(text, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="create-custom-stopwords" class="level4">
<h4 class="anchored" data-anchor-id="create-custom-stopwords">2.3.2 Create Custom Stopwords</h4>
<p>We‚Äôll remove common words that don‚Äôt add meaning to our topics. For K-pop discussions, we might want to remove very generic terms.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create custom stopword list</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>mystopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopwords</span>(<span class="st">"en"</span>),</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  stopwords<span class="sc">::</span><span class="fu">stopwords</span>(<span class="at">source =</span> <span class="st">"smart"</span>),</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add domain-specific stopwords</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https"</span>, <span class="st">"http"</span>, <span class="st">"t.co"</span>, <span class="st">"amp"</span>,  <span class="co"># URLs and HTML</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"reddit"</span>, <span class="st">"comment"</span>, <span class="st">"post"</span>, <span class="st">"thread"</span>,  <span class="co"># Reddit-specific</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"edit"</span>, <span class="st">"edited"</span>, <span class="st">"update"</span>,  <span class="co"># Reddit conventions</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"kpop"</span>  <span class="co"># Remove your own search words as they will be in every document</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>mystopwords <span class="ot">&lt;-</span> <span class="fu">unique</span>(mystopwords)</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>mystopwords <span class="ot">&lt;-</span> <span class="fu">tolower</span>(mystopwords)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Check how many stopwords we have</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(mystopwords)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] 592</code></pre>
<hr>
</section>
</section>
<section id="tokenization" class="level3">
<h3 class="anchored" data-anchor-id="tokenization">2.4 Tokenization</h3>
<p>Now we‚Äôll break our text into individual words (tokens) and remove stopwords.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tokenize the text</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>tidy_data <span class="ot">&lt;-</span> data3 <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">|&gt;</span>  <span class="co"># Break into words</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(<span class="fu">data.frame</span>(<span class="at">word =</span> mystopwords)) <span class="sc">|&gt;</span>  <span class="co"># Remove stopwords</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nchar =</span> <span class="fu">nchar</span>(word)) <span class="sc">|&gt;</span>  <span class="co"># Count characters per word</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nchar <span class="sc">&gt;</span> <span class="dv">2</span>) <span class="sc">|&gt;</span>  <span class="co"># Keep words with more than 2 characters</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"[0-9]{1}"</span>, word)) <span class="sc">|&gt;</span>  <span class="co"># Remove words with numbers</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">W"</span>, word))  <span class="co"># Remove words with special characters</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Check results</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tidy_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## # A tibble: 6 √ó 22
##   id     author link_id parent_id created_utc score downs likes controversiality
##   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;            &lt;dbl&gt;
## 1 n0o7g‚Ä¶ xxqbs‚Ä¶ t3_1kf‚Ä¶ t3_1kf7r‚Ä¶  1751328128    71     0 NA                   0
## 2 n0o7g‚Ä¶ xxqbs‚Ä¶ t3_1kf‚Ä¶ t3_1kf7r‚Ä¶  1751328128    71     0 NA                   0
## 3 n0o7g‚Ä¶ xxqbs‚Ä¶ t3_1kf‚Ä¶ t3_1kf7r‚Ä¶  1751328128    71     0 NA                   0
## 4 n0o7g‚Ä¶ xxqbs‚Ä¶ t3_1kf‚Ä¶ t3_1kf7r‚Ä¶  1751328128    71     0 NA                   0
## 5 n0o7g‚Ä¶ xxqbs‚Ä¶ t3_1kf‚Ä¶ t3_1kf7r‚Ä¶  1751328128    71     0 NA                   0
## 6 n0o7g‚Ä¶ xxqbs‚Ä¶ t3_1kf‚Ä¶ t3_1kf7r‚Ä¶  1751328128    71     0 NA                   0
## # ‚Ñπ 13 more variables: gilded &lt;dbl&gt;, subreddit &lt;chr&gt;, permalink &lt;chr&gt;,
## #   datetime &lt;dttm&gt;, date &lt;date&gt;, year &lt;dbl&gt;, month &lt;dbl&gt;, text_length &lt;dbl&gt;,
## #   comment_index &lt;int&gt;, textBU &lt;chr&gt;, CLD2 &lt;chr&gt;, word &lt;chr&gt;, nchar &lt;int&gt;</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(tidy_data)  <span class="co"># How many tokens do we have?</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] 385257</code></pre>
<hr>
</section>
<section id="term-frequency-filtering-with-tf-idf" class="level3">
<h3 class="anchored" data-anchor-id="term-frequency-filtering-with-tf-idf">2.5 Term Frequency Filtering with TF-IDF</h3>
<p>Not all words are equally useful for topic modeling. We want to remove:</p>
<ul>
<li><p><strong>Very common words</strong> that appear in almost every document (too general)</p></li>
<li><p><strong>Very rare words</strong> that appear in only 1-2 documents (too specific)</p></li>
</ul>
<p>We use <strong>TF-IDF</strong> principles to filter our vocabulary:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set thresholds</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>maxndoc <span class="ot">&lt;-</span> <span class="fl">0.75</span>   <span class="co"># Remove words in more than 75% of documents</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>minndoc <span class="ot">&lt;-</span> <span class="fl">0.001</span> <span class="co"># Remove words in less than 0.1% of documents</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate document frequency for each word</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>templength <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(tidy_data<span class="sc">$</span>comment_index))</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>good_common_words <span class="ot">&lt;-</span> tidy_data <span class="sc">|&gt;</span> </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(comment_index, word, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(word) <span class="sc">|&gt;</span> </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">doc_freq =</span> <span class="fu">n</span>() <span class="sc">/</span> templength) <span class="sc">|&gt;</span> </span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(doc_freq <span class="sc">&lt;</span> maxndoc) <span class="sc">|&gt;</span>   <span class="co"># Not too common</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(doc_freq <span class="sc">&gt;</span> minndoc)      <span class="co"># Not too rare</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="co"># How many words passed our filter?</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(good_common_words)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] 2683</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean our tidy data to only include these words</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>tidy_data_pruned <span class="ot">&lt;-</span> tidy_data <span class="sc">|&gt;</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(good_common_words)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: This is where you might lose some documents that had no remaining words</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
<section id="visualize-top-words" class="level3">
<h3 class="anchored" data-anchor-id="visualize-top-words">2.6 Visualize Top Words</h3>
<p>Before modeling, let‚Äôs see what words are most common in our corpus:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot top 50 words</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>tidy_data_pruned <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(word) <span class="sc">|&gt;</span> </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder</span>(word, n)) <span class="sc">|&gt;</span> </span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="dv">50</span>) <span class="sc">|&gt;</span>     </span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(n, word)) <span class="sc">+</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Top 50 Words in K-pop Demon Hunters Comments"</span>,</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Frequency"</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-8-1.png" class="img-fluid"><!-- --></p>
<p><strong>Questions to ask:</strong> - Do these words make sense for K-pop discussions?</p>
<ul>
<li><p>Are there any words we should add to our stopword list?</p></li>
<li><p>Do we see evidence of different themes already?</p></li>
</ul>
<hr>
</section>
<section id="create-document-term-matrix" class="level3">
<h3 class="anchored" data-anchor-id="create-document-term-matrix">2.7 Create Document-Term Matrix</h3>
<p>For topic modeling, we need to convert our tidy data into a <strong>Document-Term Matrix (DTM)</strong>:</p>
<ul>
<li><p>Rows = documents (comments)</p></li>
<li><p>Columns = words (terms)</p></li>
<li><p>Values = word counts</p></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create DTM using tidytext</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>tidy_dfm <span class="ot">&lt;-</span> tidy_data_pruned <span class="sc">|&gt;</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(comment_index, word) <span class="sc">|&gt;</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cast_dtm</span>(comment_index, word, n)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Check dimensions</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>tidy_dfm</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## &lt;&lt;DocumentTermMatrix (documents: 22316, terms: 2683)&gt;&gt;
## Non-/sparse entries: 259840/59613988
## Sparsity           : 100%
## Maximal term length: 15
## Weighting          : term frequency (tf)</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(tidy_dfm)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] 22316  2683</code></pre>
<p><strong>Understanding the Document-Term Matrix Output</strong></p>
<p>When you print the DTM, you‚Äôll see output like this:</p>
<pre><code>&lt;&lt;DocumentTermMatrix (documents: 22316, terms: 2683)&gt;&gt;
Non-/sparse entries: 259840/59613988
Sparsity           : 100%
Maximal term length: 15
Weighting          : term frequency (tf)
[1] 22316  2683</code></pre>
<p>Let‚Äôs break down what each line means:</p>
<p><strong>Line 1: Dimensions</strong> - <code>documents: 22,316</code> = We have 22,316 comments in our dataset</p>
<ul>
<li><p><code>terms: 2,683</code> = We have 2,683 unique words in our vocabulary</p></li>
<li><p>This creates a matrix with 22,216 rows √ó 2,683 columns = 59,873,828 total cells</p></li>
</ul>
<p><strong>Line 2: Entries</strong></p>
<ul>
<li><p><code>Non-sparse entries: 259,840</code> = Only 259,840 cells contain actual word counts (non-zero values)</p></li>
<li><p><code>Sparse entries: 59,613,988</code> = Most cells are empty (zeros) because most words don‚Äôt appear in most documents</p></li>
</ul>
<p><strong>Line 3: Sparsity</strong></p>
<ul>
<li><p><code>Sparsity:100%</code> = Essentially 100% of the matrix is empty (zeros)</p></li>
<li><p>This is normal! Most comments only use a small fraction of the total vocabulary</p></li>
<li><p>High sparsity is expected in text data</p></li>
</ul>
<p><strong>Line 4: Term Length</strong></p>
<ul>
<li><code>Maximal term length: 15</code> = The longest word in our vocabulary has 15 characters</li>
</ul>
<p><strong>Line 5: Weighting</strong></p>
<ul>
<li><p><code>term frequency (tf)</code> = Cells contain simple counts of how many times each word appears in each document</p></li>
<li><p>Alternative weightings include TF-IDF (which we used for filtering)</p></li>
</ul>
<p><strong>Why does this matter?</strong></p>
<p>Text data is <strong>naturally sparse</strong> because:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate actual sparsity statistics from our DTM</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>dtm_matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(tidy_dfm)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>words_per_doc <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(dtm_matrix <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(words_per_doc)      <span class="co"># Average: 11.6 unique words per comment</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] 11.64366</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(words_per_doc)    <span class="co"># Median: 7 unique words per comment</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] 7</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(words_per_doc, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.75</span>))  <span class="co"># 25th percentile: 4, 75th percentile: 13</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## 25% 75% 
##   4  13</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vocabulary usage</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(words_per_doc) <span class="sc">/</span> <span class="dv">2683</span> <span class="sc">*</span> <span class="dv">100</span>   <span class="co"># Average: 0.43% of vocabulary</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] 0.4339793</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(words_per_doc) <span class="sc">/</span> <span class="dv">2683</span> <span class="sc">*</span> <span class="dv">100</span> <span class="co"># Median: 0.26% of vocabulary</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] 0.260902</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(dtm_matrix)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Our data shows:</p>
<ul>
<li><p><strong>Average comment uses only 11.6 unique words</strong> (median: 7 words) - <strong>Vocabulary has 2683 words total</strong></p></li>
<li><p><strong>Each comment uses only 0.43% of the available vocabulary</strong> (median: 0.26%)</p></li>
<li><p><strong>Range:</strong> Comments use between 1 to 294 unique words</p></li>
<li><p><strong>Most comments (50%)</strong> use between 4-13 unique words (interquartile range)</p></li>
</ul>
<p>This extreme sparsity is why topic modeling is powerful - it finds patterns in this sparse, high-dimensional data by identifying which words tend to co-occur across documents, revealing hidden thematic structure!</p>
<p><strong>Visualization:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize distribution of words per comment</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">words =</span> words_per_doc) <span class="sc">|&gt;</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> words)) <span class="sc">+</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">50</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">mean</span>(words_per_doc), </span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">median</span>(words_per_doc), </span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"darkgreen"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">mean</span>(words_per_doc) <span class="sc">+</span> <span class="dv">15</span>, <span class="at">y =</span> <span class="dv">2000</span>, </span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Mean:"</span>, <span class="fu">round</span>(<span class="fu">mean</span>(words_per_doc), <span class="dv">1</span>)), </span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">median</span>(words_per_doc) <span class="sc">+</span> <span class="dv">15</span>, <span class="at">y =</span> <span class="dv">1800</span>, </span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Median:"</span>, <span class="fu">median</span>(words_per_doc)), </span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">"darkgreen"</span>) <span class="sc">+</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Unique Words per Comment"</span>,</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Most comments use very few unique words after preprocessing"</span>,</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Number of Unique Words"</span>,</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Comments"</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-11-1.png" class="img-fluid"><!-- --></p>
<hr>
<p><strong>Important:</strong> Notice if we lost any documents during preprocessing. This happens when comments had no words left after stopword removal and filtering.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How many documents did we start with?</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(data3)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] 22408</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How many documents in our DTM?</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(tidy_dfm)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] 22316</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How many did we lose?</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(data3) <span class="sc">-</span> <span class="fu">nrow</span>(tidy_dfm)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] 92</code></pre>
<p><strong>Summary of data filtering:</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th># Comments</th>
<th>Comments Lost</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Original data</td>
<td>23,270</td>
<td>-</td>
<td>Raw July 2025 r/kpop comments</td>
</tr>
<tr class="even">
<td>Language filter</td>
<td>23,133</td>
<td>137</td>
<td>Removed non-English comments</td>
</tr>
<tr class="odd">
<td>Duplicate removal</td>
<td>22,408</td>
<td>725</td>
<td>Removed duplicate/repeated comments</td>
</tr>
<tr class="even">
<td>Preprocessing filter</td>
<td>22,316</td>
<td>92</td>
<td>Removed comments with no words after stopword removal and TF-IDF filtering</td>
</tr>
<tr class="odd">
<td><strong>Final dataset</strong></td>
<td><strong>22,316</strong></td>
<td><strong>954 total</strong></td>
<td><strong>Ready for topic modeling</strong></td>
</tr>
</tbody>
</table>
<p>We lost 954 comments total (4.1% of original data) - this is a very reasonable amount of data loss during preprocessing!</p>
<p>The breakdown:</p>
<ul>
<li><p><strong>137 non-English comments</strong> (0.6%) - mostly Korean, Spanish, French</p></li>
<li><p><strong>725 duplicates</strong> (3.1%) - copypasta, bot comments, repeated phrases</p></li>
<li><p><strong>92 empty after preprocessing</strong> (0.4%) - comments with only stopwords/URLs</p></li>
</ul>
<hr>
</section>
</section>
<section id="choosing-the-number-of-topics-k" class="level2">
<h2 class="anchored" data-anchor-id="choosing-the-number-of-topics-k">3. Choosing the Number of Topics (K)</h2>
<p>One of the most important decisions in topic modeling is choosing <strong>how many topics (K)</strong> to extract. There‚Äôs no perfect answer, but we can use <strong>topic coherence metrics</strong> to guide our decision.</p>
<section id="what-is-topic-coherence" class="level3">
<h3 class="anchored" data-anchor-id="what-is-topic-coherence">3.1 What is Topic Coherence?</h3>
<p><strong>Topic coherence</strong> measures how interpretable and meaningful a topic is by calculating how often the top words in a topic appear together in documents.</p>
<p><strong>High coherence</strong> = words in a topic frequently co-occur (topic makes sense) <strong>Low coherence</strong> = words in a topic rarely appear together (topic is random/unclear)</p>
<p>Think of it like this:</p>
<ul>
<li><p>A topic with words <em>{dance, performance, stage, choreography}</em> has HIGH coherence (these words naturally go together)</p></li>
<li><p>A topic with words <em>{dance, breakfast, politics, ocean}</em> has LOW coherence (these words don‚Äôt relate)</p></li>
</ul>
</section>
<section id="types-of-coherence-metrics" class="level3">
<h3 class="anchored" data-anchor-id="types-of-coherence-metrics">3.2 Types of Coherence Metrics</h3>
<p>There are several ways to measure topic coherence:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Metric</th>
<th>Description</th>
<th>What It Measures</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>C_V</strong></td>
<td>Based on sliding window word co-occurrence</td>
<td>Most commonly used; balances accuracy and interpretability</td>
</tr>
<tr class="even">
<td><strong>C_UMass</strong></td>
<td>Based on document co-occurrence</td>
<td>How often topic words appear in same documents</td>
</tr>
<tr class="odd">
<td><strong>C_UCI</strong></td>
<td>Based on pointwise mutual information</td>
<td>Statistical association between words</td>
</tr>
<tr class="even">
<td><strong>C_NPMI</strong></td>
<td>Normalized pointwise mutual information</td>
<td>Normalized version of UCI</td>
</tr>
</tbody>
</table>
<p>For this class, we‚Äôll focus on <strong>C_V</strong> (most popular) and <strong>C_UMass</strong> (fastest to compute).</p>
</section>
<section id="what-makes-a-good-topic" class="level3">
<h3 class="anchored" data-anchor-id="what-makes-a-good-topic">3.3 What Makes a ‚ÄúGood‚Äù Topic?</h3>
<p>A good topic should have:</p>
<ol type="1">
<li><strong>High coherence</strong> - Words make sense together</li>
<li><strong>High exclusivity</strong> - Words are specific to this topic (not shared across all topics)</li>
<li><strong>Interpretability</strong> - Humans can understand what the topic is about</li>
<li><strong>Coverage</strong> - Topics cover the main themes in your corpus</li>
</ol>
<p><strong>Trade-off Alert:</strong> Sometimes increasing K gives you more specific topics (higher exclusivity) but lower coherence. We need to find the sweet spot!</p>
<hr>
</section>
<section id="computing-topic-coherence-for-different-k-values" class="level3">
<h3 class="anchored" data-anchor-id="computing-topic-coherence-for-different-k-values">3.4 Computing Topic Coherence for Different K Values</h3>
<p>Now we‚Äôll fit LDA models with different numbers of topics (K = 5, 10, 15, 20, 25) and calculate their coherence scores.</p>
<p><strong>Note:</strong> This step can take 5-10 minutes to run (even longer in larger data), so be patient!</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We'll test these K values</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>k_values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">50</span>)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create empty lists to store results</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>lda_models <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>coherence_scores <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">k =</span> <span class="fu">integer</span>(),</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">coherence_cv =</span> <span class="fu">numeric</span>(),</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">coherence_umass =</span> <span class="fu">numeric</span>()</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit models for each K</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (k <span class="cf">in</span> k_values) {</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Fitting LDA with K ="</span>, k, <span class="st">"...</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fit LDA model</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>  lda_model <span class="ot">&lt;-</span> <span class="fu">LDA</span>(</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>    tidy_dfm, </span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">k =</span> k, </span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"Gibbs"</span>,</span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">control =</span> <span class="fu">list</span>(</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">verbose =</span> <span class="dv">500</span>, </span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">seed =</span> <span class="dv">9898</span>,</span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">iter =</span> <span class="dv">1000</span>,</span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">burnin =</span> <span class="dv">100</span></span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store model</span></span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>  lda_models[[<span class="fu">as.character</span>(k)]] <span class="ot">&lt;-</span> lda_model</span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate coherence using topicdoc</span></span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># The function is topic_coherence() with different syntax</span></span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a>  coherence_result <span class="ot">&lt;-</span> <span class="fu">topic_coherence</span>(lda_model, tidy_dfm)</span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store results</span></span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>  coherence_scores <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a>    coherence_scores,</span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>(</span>
<span id="cb52-40"><a href="#cb52-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">k =</span> k,</span>
<span id="cb52-41"><a href="#cb52-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean_coherence =</span> <span class="fu">mean</span>(coherence_result)</span>
<span id="cb52-42"><a href="#cb52-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb52-43"><a href="#cb52-43" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb52-44"><a href="#cb52-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-45"><a href="#cb52-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"K ="</span>, k, <span class="st">"Mean Coherence ="</span>, <span class="fu">mean</span>(coherence_result), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb52-46"><a href="#cb52-46" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## Fitting LDA with K = 5 ...
## K = 5; V = 2683; M = 22316
## Sampling 1100 iterations!
## Iteration 500 ...
## Iteration 1000 ...
## Gibbs sampling completed!
## K = 5 Mean Coherence = -160.4584 
## 
## Fitting LDA with K = 10 ...
## K = 10; V = 2683; M = 22316
## Sampling 1100 iterations!
## Iteration 500 ...
## Iteration 1000 ...
## Gibbs sampling completed!
## K = 10 Mean Coherence = -178.2801 
## 
## Fitting LDA with K = 15 ...
## K = 15; V = 2683; M = 22316
## Sampling 1100 iterations!
## Iteration 500 ...
## Iteration 1000 ...
## Gibbs sampling completed!
## K = 15 Mean Coherence = -188.5915 
## 
## Fitting LDA with K = 20 ...
## K = 20; V = 2683; M = 22316
## Sampling 1100 iterations!
## Iteration 500 ...
## Iteration 1000 ...
## Gibbs sampling completed!
## K = 20 Mean Coherence = -188.3172 
## 
## Fitting LDA with K = 25 ...
## K = 25; V = 2683; M = 22316
## Sampling 1100 iterations!
## Iteration 500 ...
## Iteration 1000 ...
## Gibbs sampling completed!
## K = 25 Mean Coherence = -192.205 
## 
## Fitting LDA with K = 50 ...
## K = 50; V = 2683; M = 22316
## Sampling 1100 iterations!
## Iteration 500 ...
## Iteration 1000 ...
## Gibbs sampling completed!
## K = 50 Mean Coherence = -201.1114</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View results</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(coherence_scores)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>##    k mean_coherence
## 1  5      -160.4584
## 2 10      -178.2801
## 3 15      -188.5915
## 4 20      -188.3172
## 5 25      -192.2050
## 6 50      -201.1114</code></pre>
<hr>
</section>
<section id="visualizing-topic-coherence" class="level3">
<h3 class="anchored" data-anchor-id="visualizing-topic-coherence">3.5 Visualizing Topic Coherence</h3>
<p>Let‚Äôs visualize how coherence changes with the number of topics:</p>
<section id="coherence-across-k-values" class="level4">
<h4 class="anchored" data-anchor-id="coherence-across-k-values">3.5.1 Coherence Across K Values</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Line plot showing coherence scores</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(coherence_scores, <span class="fu">aes</span>(<span class="at">x =</span> k, <span class="at">y =</span> mean_coherence)) <span class="sc">+</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> coherence_scores[<span class="dv">1</span>,], </span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"darkgreen"</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">shape =</span> <span class="dv">17</span>) <span class="sc">+</span>  <span class="co"># Highlight K=5</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Topic Coherence by Number of Topics (K)"</span>,</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Higher (less negative) is better ‚Ä¢ Green triangle = optimal K"</span>,</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Number of Topics (K)"</span>,</span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Mean Coherence Score (UMass)"</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> k_values) <span class="sc">+</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>, <span class="at">color =</span> <span class="st">"gray40"</span>),</span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-14-1.png" class="img-fluid"><!-- --></p>
</section>
<section id="coherence-decline-from-optimal-k" class="level4">
<h4 class="anchored" data-anchor-id="coherence-decline-from-optimal-k">3.5.2 Coherence Decline from Optimal K</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate percentage decline from optimal</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>coherence_scores <span class="ot">&lt;-</span> coherence_scores <span class="sc">|&gt;</span> </span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">coherence_diff =</span> mean_coherence <span class="sc">-</span> <span class="fu">max</span>(mean_coherence),</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_decline =</span> <span class="fu">abs</span>((mean_coherence <span class="sc">-</span> <span class="fu">max</span>(mean_coherence)) <span class="sc">/</span> <span class="fu">max</span>(mean_coherence) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot percentage decline</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(coherence_scores, <span class="fu">aes</span>(<span class="at">x =</span> k, <span class="at">y =</span> percent_decline)) <span class="sc">+</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"darkred"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"darkred"</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">fill =</span> <span class="st">"darkred"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"darkgreen"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Coherence Decline from Optimal K"</span>,</span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Shows how much coherence degrades as K increases from optimal (K=5)"</span>,</span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Number of Topics (K)"</span>,</span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Percent Decline in Coherence (%)"</span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> k_values) <span class="sc">+</span></span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">paste0</span>(x, <span class="st">"%"</span>)) <span class="sc">+</span></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>, <span class="at">color =</span> <span class="st">"gray40"</span>),</span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>)</span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-15-1.png" class="img-fluid"><!-- --></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the summary table</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>coherence_scores <span class="sc">|&gt;</span> </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(k, mean_coherence, percent_decline) <span class="sc">|&gt;</span> </span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_coherence =</span> <span class="fu">round</span>(mean_coherence, <span class="dv">2</span>),</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_decline =</span> <span class="fu">round</span>(percent_decline, <span class="dv">1</span>)</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>##    k mean_coherence percent_decline
## 1  5        -160.46             0.0
## 2 10        -178.28            11.1
## 3 15        -188.59            17.5
## 4 20        -188.32            17.4
## 5 25        -192.21            19.8
## 6 50        -201.11            25.3</code></pre>
<p><strong>Key Insights from Visualizations:</strong></p>
<ol type="1">
<li><strong>K = 5 has the best coherence</strong> (-160.46)
<ul>
<li>Marked with green triangle in first plot</li>
<li>0% decline baseline (green dashed line in second plot)</li>
<li>Topics are most internally coherent</li>
</ul></li>
<li><strong>Steep initial decline from K=5 to K=10</strong> (11.1% decline)
<ul>
<li>Largest single drop visible in both plots</li>
<li>Significant quality loss when adding just 5 more topics</li>
<li>Red shaded area shows this is the steepest part of the curve</li>
</ul></li>
<li><strong>Near-plateau between K=15 and K=20</strong>
<ul>
<li>K=15: 17.5% decline</li>
<li>K=20: 17.4% decline (only 0.1% difference)</li>
<li>Nearly flat line in both plots between these points</li>
<li>Suggests a natural topic boundary for this dataset</li>
<li>Adding 5 more topics provides minimal change in quality</li>
</ul></li>
<li><strong>Gradual increase in decline continues</strong>
<ul>
<li>K=25: 19.8% decline (2.4% worse than K=20)</li>
<li>K=50: 25.3% decline (total of 25% quality loss)</li>
<li>Red shaded area grows steadily, showing accumulating cost</li>
</ul></li>
</ol>
<p><strong>What the visualizations tell us:</strong></p>
<ul>
<li><strong>First plot (line graph)</strong>: Shows absolute coherence scores getting worse (more negative)</li>
<li><strong>Second plot (area chart)</strong>: Emphasizes the <strong>cost</strong> of adding topics
<ul>
<li>Red shaded area = quality loss</li>
<li>Steepest growth at beginning (K=5 to K=10)</li>
<li>Plateau visible at K=15-20</li>
<li>Continuous growth toward K=50</li>
</ul></li>
</ul>
<p>By K=50, we‚Äôve lost about 1/4 of our coherence quality compared to the optimal K=5, suggesting severe topic fragmentation.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create models with different number of topics</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: This takes several minutes to run!</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>start_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Starting at:"</span>, <span class="fu">format</span>(start_time, <span class="st">"%H:%M:%S"</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## Starting at: 16:52:31</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> ldatuning<span class="sc">::</span><span class="fu">FindTopicsNumber</span>(</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  tidy_dfm,</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">topics =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">2</span>, <span class="at">to =</span> <span class="dv">20</span>, <span class="at">by =</span> <span class="dv">1</span>),</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="fu">c</span>(<span class="st">"CaoJuan2009"</span>, <span class="st">"Deveaud2014"</span>),</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">"Gibbs"</span>,</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">list</span>(<span class="at">seed =</span> <span class="dv">77</span>),</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">verbose =</span> <span class="cn">TRUE</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## fit models... done.
## calculate metrics:
##   CaoJuan2009... done.
##   Deveaud2014... done.</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>end_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Finished at:"</span>, <span class="fu">format</span>(end_time, <span class="st">"%H:%M:%S"</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## Finished at: 16:53:51</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Total time:"</span>, <span class="fu">round</span>(<span class="fu">difftime</span>(end_time, start_time, <span class="at">units =</span> <span class="st">"mins"</span>), <span class="dv">2</span>), <span class="st">"minutes</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## Total time: 1.34 minutes</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>ldatuning<span class="sc">::</span><span class="fu">FindTopicsNumber_plot</span>(result)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-16-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
<section id="interpreting-the-results-for-optimal-k" class="level3">
<h3 class="anchored" data-anchor-id="interpreting-the-results-for-optimal-k">3.6 Interpreting the Results for optimal K</h3>
<p>This plot shows two different metrics for evaluating topic models:</p>
<p><strong>Top Panel</strong></p>
<ul>
<li><p><strong>CaoJuan2009 (minimize):</strong></p>
<ul>
<li><p>Black circles show this metric</p></li>
<li><p><strong>Lower values = better</strong></p></li>
<li><p>Shows steady decline from K=2 to K=14</p></li>
<li><p>Reaches minimum around K=14-15</p></li>
<li><p>Suggests K=14-15 might be optimal by this metric</p></li>
</ul></li>
</ul>
<p><strong>Bottom Panel</strong></p>
<ul>
<li><p><strong>Deveaud2014 (maximize):</strong></p>
<ul>
<li><p>Black triangles show this metric</p></li>
<li><p><strong>Higher values = better</strong></p></li>
<li><p>Very noisy/unstable pattern</p></li>
<li><p>Peak at K=5, another high point at K=9</p></li>
<li><p>Much more variable than CaoJuan metric</p></li>
<li><p>Harder to identify clear optimal K</p></li>
</ul></li>
</ul>
<p><strong>What do we notice?</strong></p>
<ol type="1">
<li><strong>The two metrics disagree!</strong>
<ul>
<li>CaoJuan suggests K=14-15</li>
<li>Deveaud suggests K=5 or K=9</li>
<li>This is common - different metrics optimize for different properties</li>
</ul></li>
<li><strong>Deveaud2014 is much noisier</strong>
<ul>
<li>Large swings between consecutive K values</li>
<li>Makes it harder to identify stable patterns</li>
<li>This is why we also calculated UMass coherence separately</li>
</ul></li>
<li><strong>Compare with our UMass coherence results:</strong>
<ul>
<li>Our manual calculation showed K=5 was optimal</li>
<li>Deveaud2014 also peaks at K=5 (agreement!)</li>
<li>CaoJuan suggests higher K (disagreement)</li>
<li>The plateau we saw at K=15-20 in UMass coherence partially aligns with CaoJuan‚Äôs minimum</li>
</ul></li>
</ol>
<p><strong>Which metric should we trust?</strong></p>
<p>Different metrics measure different aspects of topic quality:</p>
<ul>
<li><p><strong>CaoJuan2009</strong>: Measures topic distinctiveness (how different topics are from each other)</p></li>
<li><p><strong>Deveaud2014</strong>: Measures topic divergence (similar concept, different formula)</p></li>
<li><p><strong>UMass Coherence</strong>: Measures how often top topic words appear together in documents</p></li>
</ul>
<p>For interpretability and practical use, <strong>UMass coherence</strong> (our manual calculation) is often preferred because it directly measures whether topic words make sense together.</p>
<hr>
</section>
<section id="choosing-optimal-k" class="level3">
<h3 class="anchored" data-anchor-id="choosing-optimal-k">3.7 Choosing Optimal K</h3>
<p>Based on our coherence analysis, we‚Äôll proceed with <strong>K = 5</strong> for the following reasons:</p>
<p><strong>Why K=5?</strong></p>
<ol type="1">
<li><strong>Best coherence score</strong> (-160.46)
<ul>
<li>Highest quality topics by UMass metric</li>
<li>Words within topics co-occur most frequently</li>
</ul></li>
<li><strong>Interpretability</strong>
<ul>
<li>5 broad themes are easier to understand and explain</li>
<li>Avoids over-fragmentation of the discourse</li>
<li>Each topic should capture a distinct aspect of K-pop discussions</li>
</ul></li>
<li><strong>Practical considerations</strong>
<ul>
<li>Good balance between granularity and coherence</li>
<li>Manageable number of topics for analysis</li>
<li>The 11% coherence loss at K=10 suggests splitting into 10 topics fragments core themes</li>
</ul></li>
</ol>
<p><strong>What about K=10, K=15, or K=20?</strong></p>
<ul>
<li><strong>K=10</strong>: Could work if you need more granularity (11% coherence loss)</li>
<li><strong>K=15-20</strong>: The plateau suggests these are natural boundaries, but with 17-17.5% coherence loss</li>
<li><strong>For this tutorial</strong>: We‚Äôll use K=5 to demonstrate clear, coherent topics</li>
</ul>
<p>Let‚Äôs now fit our LDA model with K=5 topics!</p>
<hr>
</section>
</section>
<section id="lda-model" class="level2">
<h2 class="anchored" data-anchor-id="lda-model">4. LDA Model</h2>
<p>LDA converts the document-word matrix (we had above as <code>tidy_dfm</code>) into two other matrices:</p>
<ol type="1">
<li><strong>Topic-Word matrix (Beta (Œ≤))</strong> - The probability of each word belonging to each topic</li>
<li><strong>Document-Topic matrix (Gamma (Œ≥))</strong> - The probability of each document belonging to each topic</li>
</ol>
<p><img src="https://cdn.analyticsvidhya.com/wp-content/uploads/2021/06/26864dtm.webp" class="img-fluid"></p>
<p><em>image from: <a href="https://cdn.analyticsvidhya.com/wp-content/uploads/2021/06/26864dtm.webp" class="uri">https://cdn.analyticsvidhya.com/wp-content/uploads/2021/06/26864dtm.webp</a></em></p>
<p><strong>How LDA works:</strong></p>
<ul>
<li><p><strong>Input</strong>: Document-Term Matrix (DTM)</p>
<ul>
<li>Rows = documents (Reddit comments)</li>
<li>Columns = words (vocabulary)</li>
<li>Values = word counts</li>
</ul></li>
<li><p><strong>LDA Processing</strong>: Discovers latent topics by finding patterns in word co-occurrence</p></li>
<li><p><strong>Output</strong>: Two probability matrices</p>
<ul>
<li><strong>Beta (Œ≤)</strong>: For each topic, what words are most probable?</li>
<li><strong>Gamma (Œ≥)</strong>: For each document, what topics are most probable?</li>
</ul></li>
</ul>
<hr>
<section id="train-the-lda-model-with-the-optimal-topics" class="level3">
<h3 class="anchored" data-anchor-id="train-the-lda-model-with-the-optimal-topics">4.1 Train the LDA Model with the Optimal Topics</h3>
<p>LDA objects take a lot of memory so we should always clean up the memory from no longer used objects.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up workspace - keep only essential objects</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This frees up memory and keeps the environment organized</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co"># List of objects to KEEP</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>keep_objects <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data"</span>,         <span class="co"># Original dataset</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data2"</span>,        <span class="co"># cleaned dataset</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data3"</span>,        <span class="co"># last dataset</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"mystopwords"</span>,  <span class="co"># Custom stopwords list</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tidy_dfm"</span>      <span class="co"># LDA object we will delete after</span></span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove everything except the objects we want to keep</span></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">setdiff</span>(<span class="fu">ls</span>(), keep_objects))</span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Run garbage collection to free up memory</span></span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>##           used  (Mb) gc trigger   (Mb) limit (Mb)  max used   (Mb)
## Ncells 3269735 174.7    5410774  289.0         NA   5410774  289.0
## Vcells 8790307  67.1  138689369 1058.2      36864 173357661 1322.7</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check what we have left</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Remaining objects in workspace:"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] "Remaining objects in workspace:"</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">ls</span>())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] "data"        "data2"       "data3"       "mystopwords" "tidy_dfm"</code></pre>
<p>Now let‚Äôs train our LDA model with K=5 topics.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Train LDA model with K=5 topics</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: This may take a few minutes!</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>start_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Training LDA model with K=5..."</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] "Training LDA model with K=5..."</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Start time:"</span>, <span class="fu">format</span>(start_time, <span class="st">"%H:%M:%S"</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] "Start time: 16:53:51"</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>lda_model_k5 <span class="ot">&lt;-</span> <span class="fu">LDA</span>(</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  tidy_dfm, </span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">k =</span> <span class="dv">5</span>, </span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">"Gibbs"</span>,</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">list</span>(</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">verbose =</span> <span class="dv">500</span>,   <span class="co"># Print progress every 500 iterations</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">seed =</span> <span class="dv">42</span>,       <span class="co"># For reproducibility</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">iter =</span> <span class="dv">2000</span>,     <span class="co"># Number of iterations</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">burnin =</span> <span class="dv">500</span>     <span class="co"># Burn-in period</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## K = 5; V = 2683; M = 22316
## Sampling 2500 iterations!
## Iteration 500 ...
## Iteration 1000 ...
## Iteration 1500 ...
## Iteration 2000 ...
## Iteration 2500 ...
## Gibbs sampling completed!</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>end_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Finished at:"</span>, <span class="fu">format</span>(end_time, <span class="st">"%H:%M:%S"</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] "Finished at: 16:54:11"</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Total time:"</span>, <span class="fu">round</span>(<span class="fu">difftime</span>(end_time, start_time, <span class="at">units =</span> <span class="st">"mins"</span>), <span class="dv">2</span>), <span class="st">"minutes"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## [1] "Total time: 0.33 minutes"</code></pre>
<p><strong>What do these parameters mean?</strong></p>
<ul>
<li><p><code>k = 5</code>: Number of topics (based on our coherence analysis)</p></li>
<li><p><code>method = "Gibbs"</code>: Gibbs sampling algorithm (standard for LDA)</p></li>
<li><p><code>iter = 2000</code>: Run 2000 iterations of the algorithm</p></li>
<li><p><code>burnin = 500</code>: Discard first 500 iterations (model is still ‚Äúwarming up‚Äù)</p></li>
<li><p><code>thin = 10</code>: Keep every 10th iteration after burnin (reduces autocorrelation)</p></li>
<li><p><code>seed = 42</code>: Ensures reproducibility</p></li>
</ul>
<hr>
</section>
<section id="save-your-work" class="level3">
<h3 class="anchored" data-anchor-id="save-your-work">4.2 Save Your Work</h3>
<p>Before continuing, it‚Äôs a good idea to save your workspace. LDA models take time to train, so you don‚Äôt want to lose your work!</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the entire workspace</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save.image</span>(<span class="st">"../data/Lecture9_LDA_k5.RData"</span>)</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternatively, save just the LDA model</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="co"># save(lda_model_k5, file = "../data/lda_model_k5.RData")</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a><span class="co"># To load it later:</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a><span class="co"># load("../data/Lecture9_LDA_k5.RData")</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Why save your work?</strong></p>
<ul>
<li><p>LDA training can take 5-15 minutes (or longer for large datasets)</p></li>
<li><p>If R crashes or you close your session, you‚Äôd have to retrain</p></li>
<li><p><code>save.image()</code> saves everything in your workspace</p></li>
<li><p><code>save()</code> saves specific objects (more efficient if you only need the model)</p></li>
</ul>
<hr>
</section>
<section id="look-inside-the-lda-model" class="level3">
<h3 class="anchored" data-anchor-id="look-inside-the-lda-model">4.3 Look Inside the LDA Model</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the model structure</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(lda_model_k5)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## Formal class 'LDA_Gibbs' [package "topicmodels"] with 16 slots
##   ..@ seedwords      : NULL
##   ..@ z              : int [1:300482] 2 5 3 4 5 2 3 1 3 3 ...
##   ..@ alpha          : num 10
##   ..@ call           : language LDA(x = tidy_dfm, k = 5, method = "Gibbs", control = list(verbose = 500,      seed = 42, iter = 2000, burnin = 500))
##   ..@ Dim            : int [1:2] 22316 2683
##   ..@ control        :Formal class 'LDA_Gibbscontrol' [package "topicmodels"] with 14 slots
##   .. .. ..@ delta        : num 0.1
##   .. .. ..@ iter         : int 2500
##   .. .. ..@ thin         : int 2000
##   .. .. ..@ burnin       : int 500
##   .. .. ..@ initialize   : chr "random"
##   .. .. ..@ alpha        : num 10
##   .. .. ..@ seed         : int 42
##   .. .. ..@ verbose      : int 500
##   .. .. ..@ prefix       : chr "/var/folders/1n/8wbl6_f51tz27s0119qcsfyh0000gq/T//Rtmpv4Jlwh/filec1c356174180"
##   .. .. ..@ save         : int 0
##   .. .. ..@ nstart       : int 1
##   .. .. ..@ best         : logi TRUE
##   .. .. ..@ keep         : int 0
##   .. .. ..@ estimate.beta: logi TRUE
##   ..@ k              : int 5
##   ..@ terms          : chr [1:2683] "acknowledge" "added" "artists" "big" ...
##   ..@ documents      : chr [1:22316] "1" "2" "3" "4" ...
##   ..@ beta           : num [1:5, 1:2683] -13.28 -7.65 -13.24 -13.29 -10.4 ...
##   ..@ gamma          : num [1:22316, 1:5] 0.142 0.141 0.159 0.218 0.135 ...
##   ..@ wordassignments:List of 5
##   .. ..$ i   : int [1:259840] 1 1 1 1 1 1 1 1 1 1 ...
##   .. ..$ j   : int [1:259840] 1 2 3 4 5 6 7 8 9 10 ...
##   .. ..$ v   : num [1:259840] 2 3 3 4 5 2 3 1 3 2 ...
##   .. ..$ nrow: int 22316
##   .. ..$ ncol: int 2683
##   .. ..- attr(*, "class")= chr "simple_triplet_matrix"
##   ..@ loglikelihood  : num -1798660
##   ..@ iter           : int 2500
##   ..@ logLiks        : num(0) 
##   ..@ n              : int 300482</code></pre>
<p><strong>Key components we see:</strong></p>
<pre><code>Formal class 'LDA_Gibbs' [package "topicmodels"] with 16 slots
  ..@ k              : int 5              # Number of topics
  ..@ terms          : chr [1:2683]       # Vocabulary (2,683 unique words)
  ..@ documents      : chr [1:22316]      # Document IDs (22,316 comments)
  ..@ beta           : num [1:5, 1:2683]  # Topic-word probabilities (5 topics √ó 2,683 words)
  ..@ gamma          : num [1:22316, 1:5] # Document-topic probabilities (22,316 docs √ó 5 topics)
  ..@ alpha          : num 10             # Prior for document-topic distribution
  ..@ iter           : int 2500           # Total iterations run
  ..@ loglikelihood  : num -1798660      # Model fit (higher is better)</code></pre>
<p><strong>What these components mean:</strong></p>
<ul>
<li><p><strong><code>@k</code></strong>: We trained 5 topics (as planned)</p></li>
<li><p><strong><code>@terms</code></strong>: All 2,683 unique words in our vocabulary</p></li>
<li><p><strong><code>@documents</code></strong>: All 22,316 Reddit comment IDs</p></li>
<li><p><strong><code>@beta</code></strong>: The Topic-Word matrix (which words belong to which topics?)</p></li>
<li><p><strong><code>@gamma</code></strong>: The Document-Topic matrix (which topics appear in which documents?)</p></li>
<li><p><strong><code>@alpha</code></strong>: Hyperparameter controlling topic distribution (10 = fairly diffuse)</p></li>
<li><p><strong><code>@loglikelihood</code></strong>: How well the model fits the data (more negative = worse fit)</p></li>
</ul>
<p>We are primarily interested in <code>@beta</code> and <code>@gamma</code> for interpretation!</p>
<hr>
<hr>
</section>
</section>
<section id="the-beta-gamma-matrices" class="level2">
<h2 class="anchored" data-anchor-id="the-beta-gamma-matrices">5. The Beta &amp; Gamma Matrices</h2>
<section id="beta-Œ≤-topic-word-probabilities" class="level3">
<h3 class="anchored" data-anchor-id="beta-Œ≤-topic-word-probabilities">5.1 Beta (Œ≤): Topic-Word Probabilities</h3>
<p><strong>Beta (Œ≤): The per-topic-per-word probabilities</strong></p>
<ul>
<li><p>Beta is the proportion of the topic that is made up of words from the vocabulary</p></li>
<li><p>Shows which words are most important to each topic</p></li>
<li><p>Dimensions: Topics √ó Words (5 √ó 2,683 in our case)</p></li>
</ul>
<p><strong>Gamma (Œ≥): The per-document-per-topic probabilities</strong></p>
<ul>
<li><p>Gamma is the proportion of the document that is made up of words from the assigned topic</p></li>
<li><p>Shows which topics are present in each document</p></li>
<li><p>Dimensions: Documents √ó Topics (22,316 √ó 5 in our case)</p></li>
</ul>
<hr>
</section>
<section id="top-words-per-topic---the-beta-Œ≤-matrix-using-tidy" class="level3">
<h3 class="anchored" data-anchor-id="top-words-per-topic---the-beta-Œ≤-matrix-using-tidy">5.2 Top Words per Topic - The Beta (Œ≤) Matrix using Tidy</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract beta matrix using tidytext</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>lda_topics <span class="ot">&lt;-</span> <span class="fu">tidy</span>(lda_model_k5, <span class="at">matrix =</span> <span class="st">"beta"</span>)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lda_topics, <span class="dv">20</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## # A tibble: 20 √ó 3
##    topic term              beta
##    &lt;int&gt; &lt;chr&gt;            &lt;dbl&gt;
##  1     1 acknowledge 0.00000171
##  2     2 acknowledge 0.000477  
##  3     3 acknowledge 0.00000177
##  4     4 acknowledge 0.00000170
##  5     5 acknowledge 0.0000304 
##  6     1 added       0.00000171
##  7     2 added       0.0000696 
##  8     3 added       0.00190   
##  9     4 added       0.0000867 
## 10     5 added       0.00110   
## 11     1 artists     0.00000171
## 12     2 artists     0.00000170
## 13     3 artists     0.0132    
## 14     4 artists     0.00000170
## 15     5 artists     0.00000145
## 16     1 big         0.000138  
## 17     2 big         0.00000170
## 18     3 big         0.00000177
## 19     4 big         0.0123    
## 20     5 big         0.00000145</code></pre>
<p><strong>Results:</strong></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>topic</th>
<th>term</th>
<th>beta</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>acknowledge</td>
<td>1.708546e-06</td>
</tr>
<tr class="even">
<td>2</td>
<td>acknowledge</td>
<td>4.769883e-04</td>
</tr>
<tr class="odd">
<td>3</td>
<td>acknowledge</td>
<td>1.769839e-06</td>
</tr>
<tr class="even">
<td>4</td>
<td>acknowledge</td>
<td>1.699227e-06</td>
</tr>
<tr class="odd">
<td>5</td>
<td>acknowledge</td>
<td>3.042142e-05</td>
</tr>
<tr class="even">
<td>1</td>
<td>added</td>
<td>1.708546e-06</td>
</tr>
<tr class="odd">
<td>2</td>
<td>added</td>
<td>6.959616e-05</td>
</tr>
<tr class="even">
<td>3</td>
<td>added</td>
<td>1.895498e-03</td>
</tr>
<tr class="odd">
<td>4</td>
<td>added</td>
<td>8.666056e-05</td>
</tr>
<tr class="even">
<td>5</td>
<td>added</td>
<td>1.102414e-03</td>
</tr>
</tbody>
</table>
<p><strong>How do we interpret this?</strong></p>
<p>Each row shows the probability of a word belonging to a topic. For example, looking at the word ‚Äúacknowledge‚Äù across all topics:</p>
<ul>
<li><p><strong>Topic 1:</strong> <span class="math inline">\(\beta = 1.71 \times 10^{-6}\)</span> (0.000171% - very rare)</p></li>
<li><p><strong>Topic 2:</strong> <span class="math inline">\(\beta = 4.77 \times 10^{-4}\)</span> (0.0477% - <strong>most associated</strong>)</p></li>
<li><p><strong>Topic 3:</strong> <span class="math inline">\(\beta = 1.77 \times 10^{-6}\)</span> (0.000177% - very rare)</p></li>
<li><p><strong>Topic 4:</strong> <span class="math inline">\(\beta = 1.70 \times 10^{-6}\)</span> (0.000170% - very rare)</p></li>
<li><p><strong>Topic 5:</strong> <span class="math inline">\(\beta = 3.04 \times 10^{-5}\)</span> (0.00304% - rare)</p></li>
</ul>
<p>This tells us ‚Äúacknowledge‚Äù is most strongly associated with <strong>Topic 2</strong> (about 280x more likely than in Topic 1!), making it a potentially defining word for that topic.</p>
<p>Similarly, for ‚Äúadded‚Äù:</p>
<ul>
<li><p>Most strongly associated with <strong>Topic 3</strong> (<span class="math inline">\(\beta = 0.0019\)</span>)</p></li>
<li><p>Also appears in <strong>Topic 5</strong> (<span class="math inline">\(\beta = 0.0011\)</span>)</p></li>
<li><p>Rarely appears in other topics</p></li>
</ul>
<p><strong>Key takeaway:</strong> Even small beta values matter! The <em>relative</em> differences between topics tell us which words characterize each topic.</p>
<p>In order to get the highest probabilities for each topic, we can use <code>slice_max()</code>:</p>
<hr>
</section>
<section id="top-10-words-per-topic" class="level3">
<h3 class="anchored" data-anchor-id="top-10-words-per-topic">5.3 Top 10 Words per Topic</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get top 10 words for each topic</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>lda_top_terms <span class="ot">&lt;-</span> lda_topics <span class="sc">|&gt;</span> </span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">|&gt;</span> </span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(beta, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(topic, <span class="sc">-</span>beta)</span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a><span class="co"># View the results</span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lda_top_terms)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## # A tibble: 50 √ó 3
##    topic term     beta
##    &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;
##  1     1 song  0.0435 
##  2     1 love  0.0294 
##  3     1 good  0.0285 
##  4     1 album 0.0237 
##  5     1 songs 0.0227 
##  6     1 lol   0.0121 
##  7     1 happy 0.0108 
##  8     1 video 0.0106 
##  9     1 great 0.0102 
## 10     1 live  0.00914
## # ‚Ñπ 40 more rows</code></pre>
<p><strong>Interpreting the results:</strong></p>
<p>Look at the top words for each topic. Do they form coherent themes?</p>
<p><strong>Questions to ask yourself:</strong></p>
<ol type="1">
<li><strong>Do the words in each topic relate to each other?</strong>
<ul>
<li>Topic 1 might have: album, release, comeback, music</li>
<li>This suggests a ‚Äúmusic release‚Äù theme</li>
</ul></li>
<li><strong>Are the topics distinct from each other?</strong>
<ul>
<li>Compare Topic 1 vs Topic 2</li>
<li>Do they have different top words?</li>
<li>Or do they share many words? (if so, might need different K)</li>
</ul></li>
<li><strong>Can you give each topic a meaningful label?</strong>
<ul>
<li>Based on the top 10 words, what would you call this topic?</li>
<li>Examples: ‚ÄúFan Discussions‚Äù, ‚ÄúArtist News‚Äù, ‚ÄúMusic Reviews‚Äù, etc.</li>
</ul></li>
</ol>
<p><strong>What makes a good topic?</strong></p>
<ul>
<li><p>Words are semantically related</p></li>
<li><p>Topic has a clear, interpretable theme</p></li>
<li><p>Topics are distinct from each other (minimal overlap in top words)</p></li>
</ul>
<hr>
</section>
<section id="visualize-top-words-1" class="level3">
<h3 class="anchored" data-anchor-id="visualize-top-words-1">5.4 Visualize Top Words</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize top 10 words per topic</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>lda_top_terms <span class="sc">|&gt;</span> </span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">reorder_within</span>(term, beta, topic)) <span class="sc">|&gt;</span> </span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(beta, term, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> topic, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reordered</span>() <span class="sc">+</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Top 10 Words per Topic (K=5)"</span>,</span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Beta (Word Probability in Topic)"</span>,</span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span></span>
<span id="cb93-12"><a href="#cb93-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb93-13"><a href="#cb93-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-23-1.png" class="img-fluid"><!-- --></p>
<p><strong>Interpreting the visualization:</strong></p>
<ul>
<li><strong>Each panel</strong> shows one topic (1-5)</li>
<li><strong>Longer bars</strong> = higher probability in that topic</li>
<li><strong>Y-axis</strong> shows the top 10 words for that topic</li>
<li><strong>X-axis</strong> shows the beta value (word probability)</li>
</ul>
<p><strong>What to look for:</strong></p>
<ol type="1">
<li><strong>Clear themes</strong>: Do the words in each panel make sense together?</li>
<li><strong>Distinct topics</strong>: Are the words different across panels?</li>
<li><strong>Probability distribution</strong>: Are the beta values concentrated (few dominant words) or spread out (many equally important words)?</li>
</ol>
<p>Let‚Äôs examine what each topic represents based on its top words:</p>
<p><strong>Topic 1 (Red)</strong>: <em>Music Appreciation &amp; Emotional Responses</em></p>
<ul>
<li><p>Top words: song, love, good, album, songs, lol, happy, video, great, live</p></li>
<li><p>Theme: Personal reactions to music, positive sentiment</p></li>
<li><p>Beta range: 0.01 - 0.043 (highest beta of all topics!)</p></li>
</ul>
<p><strong>Topic 2 (Yellow-Green)</strong>: <em>Fan Discussions &amp; General Commentary</em></p>
<ul>
<li><p>Top words: people, back, make, time, thing, fans, girls, hope, thought, yeah</p></li>
<li><p>Theme: General conversation, fan perspectives</p></li>
<li><p>Beta range: 0.005 - 0.035</p></li>
</ul>
<p><strong>Topic 3 (Teal)</strong>: <em>Subreddit Rules &amp; Content Moderation</em></p>
<ul>
<li><p>Top words: rules, questions, pop, message, reason, content, artists, fan, wiki, compose</p></li>
<li><p>Theme: Meta-discussion about the subreddit itself</p></li>
<li><p>Beta range: 0.005 - 0.020 (most specific topic)</p></li>
</ul>
<p><strong>Topic 4 (Blue)</strong>: <em>K-pop Groups &amp; Industry</em></p>
<ul>
<li><p>Top words: group, music, groups, year, years, time, show, bts, big, debut</p></li>
<li><p>Theme: Discussion of groups, debuts, and career timelines</p></li>
<li><p>Beta range: 0.01 - 0.035</p></li>
</ul>
<p><strong>Topic 5 (Purple)</strong>: <em>HYBE-ADOR Controversy</em></p>
<ul>
<li><p>Top words: hybe, mhj, newjeans, ador, case, illit, contract, side, court, members</p></li>
<li><p>Theme: Specific legal/industry controversy (HYBE vs.&nbsp;Min Heejin/ADOR)</p></li>
<li><p>Beta range: 0.005 - 0.035</p></li>
</ul>
<p><strong>Key Observations:</strong></p>
<ol type="1">
<li><p><strong>Clear thematic separation</strong>: Each topic has distinct vocabulary</p></li>
<li><p><strong>Topic 1 has highest beta values</strong>: Music appreciation is the most concentrated topic</p></li>
<li><p><strong>Topic 5 is highly specific</strong>: Captures a particular industry event (HYBE-ADOR dispute)</p></li>
<li><p><strong>Topic 3 is meta</strong>: About the subreddit itself, not K-pop content</p></li>
<li><p><strong>Topics 2 and 4</strong>: General fan discourse and group discussions</p></li>
</ol>
<p><strong>Quality Assessment:</strong></p>
<ul>
<li><p>‚úÖ Topics are interpretable</p></li>
<li><p>‚úÖ Topics are distinct (minimal word overlap)</p></li>
<li><p>‚úÖ Captures both content (music) and community dynamics (rules, discussions)</p></li>
<li><p>‚ö†Ô∏è Topic 5 may be too narrow (time-specific controversy)</p></li>
</ul>
<hr>
</section>
<section id="comparing-words-between-topics" class="level3">
<h3 class="anchored" data-anchor-id="comparing-words-between-topics">5.5 Comparing Words Between Topics</h3>
<p>We can also identify distinguishing terms between two topics by pivoting wider and computing the logarithmic ratio, which tells us how much more a word is associated with one topic versus another:</p>
<ul>
<li><p><code>log_ratio &gt; 0</code> ‚Üí word is more associated with topic 2</p></li>
<li><p><code>log_ratio &lt; 0</code> ‚Üí word is more associated with topic 1</p></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare Topic 1 vs Topic 2</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>beta_wide <span class="ot">&lt;-</span> lda_topics <span class="sc">|&gt;</span> </span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">paste0</span>(<span class="st">"topic"</span>, topic)) <span class="sc">|&gt;</span>  <span class="co"># Add "topic" prefix since you cannot have numeric column names in R</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> topic, <span class="at">values_from =</span> beta) <span class="sc">|&gt;</span>  <span class="co"># Pivot wider: each topic becomes a column</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic1 <span class="sc">&gt;</span> .<span class="dv">001</span> <span class="sc">|</span> topic2 <span class="sc">&gt;</span> .<span class="dv">001</span>) <span class="sc">|&gt;</span>  <span class="co"># Keep only rows with non-negligible presence in either topic</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_ratio =</span> <span class="fu">log2</span>(topic2 <span class="sc">/</span> topic1))  <span class="co"># Calculate log ratio</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(beta_wide)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## # A tibble: 6 √ó 7
##   term           topic1     topic2     topic3     topic4     topic5 log_ratio
##   &lt;chr&gt;           &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;
## 1 completely 0.0000188  0.00209    0.00000177 0.00000170 0.00141         6.80
## 2 cut        0.00190    0.000104   0.00000177 0.000172   0.0000304      -4.20
## 3 fans       0.00000171 0.0133     0.00303    0.00333    0.00000145     12.9 
## 4 hope       0.00463    0.0113     0.00000177 0.00000170 0.00000145      1.28
## 5 kind       0.0000871  0.00762    0.00000177 0.0000187  0.00000145      6.45
## 6 live       0.00914    0.00000170 0.00000177 0.00000170 0.00000145    -12.4</code></pre>
<p><strong>Understanding log_ratio:</strong></p>
<p>The log ratio tells us the relative strength of association:</p>
<ul>
<li><p><code>log_ratio = 2</code> means word is 4x more likely in Topic 2 (2^2 = 4)</p></li>
<li><p><code>log_ratio = -2</code> means word is 4x more likely in Topic 1</p></li>
<li><p><code>log_ratio = 0</code> means equal probability in both topics</p></li>
</ul>
<p><strong>Interpreting these results:</strong></p>
<p>Words strongly associated with <strong>Topic 1</strong> (Music Appreciation):</p>
<ul>
<li><p><code>live</code> (log_ratio = -12.4): 2^12.4 = <strong>5,452x</strong> more likely in Topic 1!</p></li>
<li><p><code>cut</code> (log_ratio = -4.2): About <strong>18x</strong> more likely in Topic 1</p></li>
</ul>
<p>Words strongly associated with <strong>Topic 2</strong> (Fan Discussions):</p>
<ul>
<li><p><code>fans</code> (log_ratio = 12.9): 2^12.9 = <strong>7,645x</strong> more likely in Topic 2!</p></li>
<li><p><code>completely</code> (log_ratio = 6.8): About <strong>111x</strong> more likely in Topic 2</p></li>
<li><p><code>kind</code> (log_ratio = 6.5): About <strong>90x</strong> more likely in Topic 2</p></li>
</ul>
<p>Words slightly more common in Topic 2:</p>
<ul>
<li><code>hope</code> (log_ratio = 1.3): About <strong>2.5x</strong> more likely in Topic 2</li>
</ul>
<p>This confirms our topic interpretations:</p>
<ul>
<li><p><strong>Topic 1</strong> focuses on music performance and appreciation</p></li>
<li><p><strong>Topic 2</strong> focuses on fan community discussions</p></li>
<li><p><strong>Topic 2</strong> focuses on fan community discussions</p></li>
</ul>
<hr>
</section>
<section id="visualize-word-comparisons" class="level3">
<h3 class="anchored" data-anchor-id="visualize-word-comparisons">5.6 Visualize Word Comparisons</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize the comparison between Topic 1 and Topic 2 top 15 words from each side</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>beta_wide_top <span class="ot">&lt;-</span> beta_wide <span class="sc">|&gt;</span> </span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(log_ratio) <span class="sc">|&gt;</span> </span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>, (<span class="fu">n</span>()<span class="sc">-</span><span class="dv">14</span>)<span class="sc">:</span><span class="fu">n</span>()))  <span class="co"># First 15 and last 15</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(beta_wide_top, <span class="fu">aes</span>(<span class="at">x =</span> log_ratio, <span class="at">y =</span> <span class="fu">reorder</span>(term, log_ratio))) <span class="sc">+</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"gray50"</span>) <span class="sc">+</span></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Log2 ratio of beta in Topic 2 / Topic 1"</span>,</span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Top 15 Distinctive Words for Topic 1 vs Topic 2"</span></span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-25-1.png" class="img-fluid"><!-- --></p>
<p><strong>Interpretation:</strong></p>
<p><strong>Left side (Topic 1 - Music Appreciation):</strong></p>
<ul>
<li><p><strong>Music content</strong>: ‚Äúsong‚Äù, ‚Äúalbum‚Äù, ‚Äúsongs‚Äù, ‚Äútrack‚Äù</p></li>
<li><p><strong>Audio/visual media</strong>: ‚Äúsound‚Äù, ‚Äúsounds‚Äù, ‚Äúvideo‚Äù, ‚Äúmovie‚Äù</p></li>
<li><p><strong>Consumption verbs</strong>: ‚Äúwatch‚Äù, ‚Äúwait‚Äù, ‚Äúfull‚Äù</p></li>
<li><p><strong>Positive reactions</strong>: ‚Äúhappy‚Äù, ‚Äúgreat‚Äù</p></li>
<li><p><strong>Performance</strong>: ‚Äúlive‚Äù, ‚Äúbit‚Äù</p></li>
</ul>
<p>Pattern: Words about <strong>consuming and responding to K-pop content</strong></p>
<p><strong>Right side (Topic 2 - Fan Discussions):</strong></p>
<ul>
<li><p><strong>Community references</strong>: ‚Äúpeople‚Äù, ‚Äúfans‚Äù</p></li>
<li><p><strong>Action/causation</strong>: ‚Äúmake‚Äù, ‚Äúmakes‚Äù, ‚Äúmaking‚Äù, ‚Äúgive‚Äù, ‚Äúwork‚Äù</p></li>
<li><p><strong>Temporal references</strong>: ‚Äútime‚Äù, ‚Äúhappened‚Äù, ‚Äúremember‚Äù, ‚Äúwanted‚Äù</p></li>
<li><p><strong>Evaluation</strong>: ‚Äúbad‚Äù, ‚Äúsense‚Äù, ‚Äúliterally‚Äù, ‚Äúthings‚Äù</p></li>
</ul>
<p>Pattern: Words about <strong>reasoning, explaining, and discussing events in the community</strong></p>
<p><strong>What Research Questions Does This Answer?</strong></p>
<ol type="1">
<li><p><strong>How do K-pop fans discuss different aspects of the fandom?</strong></p>
<ul>
<li><p><strong>Content consumption</strong> (Topic 1): Focus on media, audio/visual qualities, emotional reactions</p></li>
<li><p><strong>Meta-discussion</strong> (Topic 2): Focus on actions, community dynamics, reasoning about events</p></li>
</ul></li>
<li><p><strong>What distinguishes casual content appreciation from community discourse?</strong></p>
<ul>
<li><p>Topic 1 = Individual consumption experience (‚ÄúI love this song/video‚Äù)</p></li>
<li><p>Topic 2 = Collective analysis and explanation (‚Äúpeople make/give‚Äù, ‚Äúthis happened‚Äù)</p></li>
</ul></li>
<li><p><strong>How can we categorize comment types automatically?</strong></p>
<ul>
<li><p>Comments with ‚Äúsong‚Äù, ‚Äúalbum‚Äù, ‚Äúwatch‚Äù, ‚Äúlive‚Äù ‚Üí Content appreciation</p></li>
<li><p>Comments with ‚Äúpeople‚Äù, ‚Äúfans‚Äù, ‚Äúmakes‚Äù, ‚Äúhappened‚Äù ‚Üí Community discussion/analysis</p></li>
</ul></li>
<li><p><strong>What is the structure of K-pop fan discourse?</strong></p>
<ul>
<li><p><strong>Affective dimension</strong> (Topic 1): Emotional responses to content</p></li>
<li><p><strong>Analytical dimension</strong> (Topic 2): Reasoning about community events and behaviors</p></li>
</ul></li>
</ol>
<p><strong>Key Insight:</strong></p>
<p>Topic 1 is about <strong>‚Äúwhat I‚Äôm experiencing‚Äù</strong> (sensory, emotional, immediate)</p>
<p>Topic 2 is about <strong>‚Äúwhat‚Äôs happening/why‚Äù</strong> (analytical, causal, reflective)</p>
<p>This distinction reveals two modes of K-pop fan engagement: consumption and critical discussion.</p>
<hr>
</section>
<section id="top-documents-per-topic---the-gamma-Œ≥-matrix-using-tidy" class="level3">
<h3 class="anchored" data-anchor-id="top-documents-per-topic---the-gamma-Œ≥-matrix-using-tidy">5.7 Top Documents per Topic - The Gamma (Œ≥) Matrix using Tidy</h3>
<p>Now let‚Äôs look at <strong>Gamma</strong>: which topics appear in which documents?</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract gamma matrix</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>lda_documents <span class="ot">&lt;-</span> <span class="fu">tidy</span>(lda_model_k5, <span class="at">matrix =</span> <span class="st">"gamma"</span>)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lda_documents, <span class="dv">20</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## # A tibble: 20 √ó 3
##    document topic gamma
##    &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;
##  1 1            1 0.142
##  2 2            1 0.141
##  3 3            1 0.159
##  4 4            1 0.218
##  5 5            1 0.135
##  6 6            1 0.259
##  7 7            1 0.212
##  8 8            1 0.207
##  9 9            1 0.115
## 10 10           1 0.192
## 11 11           1 0.204
## 12 12           1 0.190
## 13 13           1 0.189
## 14 14           1 0.207
## 15 15           1 0.218
## 16 16           1 0.204
## 17 17           1 0.143
## 18 18           1 0.222
## 19 19           1 0.185
## 20 21           1 0.179</code></pre>
<p><strong>What are we seeing?</strong></p>
<p>Each row shows:</p>
<ul>
<li><p><code>document</code>: Reddit comment ID (1, 2, 3, ‚Ä¶)</p></li>
<li><p><code>topic</code>: Topic number (1-5)</p></li>
<li><p><code>gamma</code>: Probability that this document is about this topic</p></li>
</ul>
<p><strong>Understanding Document 1:</strong></p>
<ul>
<li><p>Topic 1 (Music): Œ≥ = 0.142 (14.2%)</p></li>
<li><p>Topic 2 (Discussions): Œ≥ = 0.141 (14.1%)</p></li>
<li><p>Topic 3 (Rules): Œ≥ = 0.159 (15.9%)</p></li>
<li><p>Topic 4 (Groups): Œ≥ = 0.218 (21.8%) ‚Üê <strong>Dominant topic</strong></p></li>
<li><p>Topic 5 (HYBE): Œ≥ = 0.135 (13.5%)</p></li>
</ul>
<p><strong>Interpretation:</strong> Document 1 is primarily about <strong>K-pop groups</strong> (Topic 4), but has relatively balanced contributions from all topics. This suggests a comment that touches on multiple themes.</p>
<p><strong>Understanding Document 2:</strong></p>
<ul>
<li><p>Topic 1 (Music): Œ≥ = 0.259 (25.9%) ‚Üê <strong>Dominant topic</strong></p></li>
<li><p>Topic 2 (Discussions): Œ≥ = 0.212 (21.2%)</p></li>
<li><p>Topic 3 (Rules): Œ≥ = 0.207 (20.7%)</p></li>
<li><p>Topic 4 (Groups): Œ≥ = 0.115 (11.5%)</p></li>
<li><p>Topic 5 (HYBE): Œ≥ = 0.192 (19.2%)</p></li>
</ul>
<p><strong>Interpretation:</strong> Document 2 is primarily about <strong>music appreciation</strong> (Topic 1), with significant discussion elements. This might be a comment praising a song while discussing it with others.</p>
<p><strong>Key observations:</strong></p>
<ol type="1">
<li><p><strong>Mixed topics are common</strong>: Most documents don‚Äôt belong to just one topic</p></li>
<li><p><strong>Gamma values add up to 1.0</strong> for each document (probabilities must sum to 100%)</p></li>
<li><p><strong>Topic dominance varies</strong>: Some documents have a clear dominant topic, others are more balanced</p></li>
</ol>
<hr>
</section>
<section id="visualizing-document-topic-distributions" class="level3">
<h3 class="anchored" data-anchor-id="visualizing-document-topic-distributions">5.8 Visualizing Document-Topic Distributions</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize gamma distributions for first few documents</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>lda_documents <span class="sc">|&gt;</span> </span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">as.numeric</span>(document) <span class="sc">&lt;=</span> <span class="dv">10</span>) <span class="sc">|&gt;</span>  <span class="co"># First 10 documents only</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">document =</span> <span class="fu">factor</span>(document)) <span class="sc">|&gt;</span> </span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(topic), <span class="at">y =</span> gamma, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> document, <span class="at">ncol =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Topic Distribution in First 10 Documents"</span>,</span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Topic"</span>,</span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Gamma (Topic Probability)"</span></span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb99-13"><a href="#cb99-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-27-1.png" class="img-fluid"><!-- --></p>
<p><strong>What this shows:</strong></p>
<ul>
<li><p>Each panel = one Reddit comment (Documents 1-10)</p></li>
<li><p>Bar colors: Red (Topic 1: Music), Yellow-green (Topic 2: Discussions), Teal (Topic 3: Rules), Blue (Topic 4: Groups), Purple (Topic 5: HYBE)</p></li>
<li><p>Taller bars = topic is more dominant in that comment</p></li>
<li><p>Y-axis goes up to 0.5 (50% probability)</p></li>
</ul>
<p><strong>Key Observations:</strong></p>
<p><strong>Documents with clear dominant topics:</strong></p>
<ul>
<li><p><strong>Document 2</strong>: Topic 3 (Rules) ~44% - likely a moderator removal message</p></li>
<li><p><strong>Document 3</strong>: Topic 3 (Rules) ~39% - another rule-related post</p></li>
<li><p><strong>Document 5</strong>: Topic 3 (Rules) ~40% - rule discussion or removal</p></li>
<li><p><strong>Document 9</strong>: Topic 3 (Rules) ~48% - strongest single-topic focus!</p></li>
</ul>
<p><strong>Documents with balanced/mixed topics:</strong></p>
<ul>
<li><p><strong>Documents 1, 4, 6, 7, 8, 10</strong>: All show relatively even distribution across 5 topics (~20% each)</p></li>
<li><p>This represents comments that touch on multiple themes</p></li>
</ul>
<p><strong>Why is Topic 3 so dominant in some documents?</strong></p>
<p>Remember, Topic 3 is about <strong>subreddit rules and moderation</strong>. Documents 2, 3, 5, and 9 likely contain:</p>
<ul>
<li><p>Moderator removal messages (‚ÄúYour post has been removed‚Ä¶‚Äù)</p></li>
<li><p>Rule clarification discussions</p></li>
<li><p>Meta-discussions about subreddit guidelines</p></li>
</ul>
<p>These are formulaic, repetitive texts that cluster tightly together.</p>
<p><strong>Why are most other documents balanced?</strong></p>
<p>Real K-pop discussions often blend themes: - Discussing a <strong>group‚Äôs comeback</strong> (Topic 4) while praising the <strong>music</strong> (Topic 1)</p>
<ul>
<li><p>Talking about <strong>fans‚Äô reactions</strong> (Topic 2) to the <strong>HYBE controversy</strong> (Topic 5)</p></li>
<li><p>Sharing <strong>personal opinions</strong> about <strong>groups and songs</strong> (Topics 1, 2, 4 mixed)</p></li>
</ul>
<p><strong>Research implications:</strong></p>
<ol type="1">
<li><p><strong>Automated content filtering</strong>: Documents with &gt;40% Topic 3 are likely mod messages, could be filtered out for analysis</p></li>
<li><p><strong>Discourse complexity</strong>: Most organic fan discussions are multi-topical</p></li>
<li><p><strong>Topic purity varies</strong>: Administrative content (rules) is more ‚Äúpure,‚Äù while fan discussions blend themes</p></li>
</ol>
<hr>
</section>
<section id="finding-representative-documents-for-each-topic" class="level3">
<h3 class="anchored" data-anchor-id="finding-representative-documents-for-each-topic">5.9 Finding Representative Documents for Each Topic</h3>
<p>Which documents are the <strong>best examples</strong> of each topic? Let‚Äôs find documents with the highest gamma values for each topic:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find top 3 documents for each topic</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>top_documents <span class="ot">&lt;-</span> lda_documents <span class="sc">|&gt;</span> </span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">|&gt;</span> </span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(gamma, <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span> </span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(topic, <span class="sc">-</span>gamma)</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(top_documents)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## # A tibble: 18 √ó 3
## # Groups:   topic [5]
##    document topic gamma
##    &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;
##  1 8509         1 0.768
##  2 8633         1 0.677
##  3 16256        1 0.656
##  4 19526        2 0.449
##  5 2102         2 0.447
##  6 899          2 0.432
##  7 3842         3 0.732
##  8 2888         3 0.728
##  9 3856         3 0.728
## 10 13877        3 0.728
## 11 19823        3 0.728
## 12 22310        3 0.728
## 13 6834         4 0.567
## 14 17376        4 0.563
## 15 6860         4 0.547
## 16 17731        5 0.832
## 17 17958        5 0.827
## 18 11269        5 0.824</code></pre>
<p><strong>What are we finding?</strong></p>
<p>For each topic, we‚Äôre identifying the 3 documents that are <strong>most strongly associated</strong> with that topic (highest gamma values).</p>
<hr>
</section>
<section id="examining-representative-document-content" class="level3">
<h3 class="anchored" data-anchor-id="examining-representative-document-content">5.10 Examining Representative Document Content</h3>
<p>Now let‚Äôs see what these highly-representative documents actually say:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Join with original text to see the content</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>top_docs_with_text  <span class="ot">&lt;-</span> </span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  top_documents <span class="sc">|&gt;</span> </span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">document =</span> <span class="fu">as.integer</span>(document)) <span class="sc">|&gt;</span>  <span class="co"># Convert character to integer</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data3 <span class="sc">|&gt;</span> <span class="fu">select</span>(comment_index, text, author, score), </span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"document"</span> <span class="ot">=</span> <span class="st">"comment_index"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(topic, <span class="sc">-</span>gamma)</span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a><span class="co"># View Topic 1 (Music Appreciation) examples</span></span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a>top_docs_with_text <span class="sc">|&gt;</span> </span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(document, gamma, text) <span class="sc">|&gt;</span> </span>
<span id="cb102-13"><a href="#cb102-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## # A tibble: 3 √ó 4
## # Groups:   topic [1]
##   topic document gamma text                                                     
##   &lt;int&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;                                                    
## 1     1     8509 0.768 "**four**: fire instrumental for an intro song, gets you‚Ä¶
## 2     1     8633 0.677 "3 tracks in WHAT IS OPTIONS?? Sorry for overlooking you‚Ä¶
## 3     1    16256 0.656 "i've listened to the album a few times now and have gat‚Ä¶</code></pre>
<p><strong>Topic 1 (Music Appreciation) - Top Documents:</strong></p>
<p><strong>What we see:</strong> All three documents are <strong>detailed album reviews</strong> with track-by-track analysis:</p>
<ul>
<li><p>Document 8509 (Œ≥=0.768): TWICE album review covering all 14 tracks</p></li>
<li><p>Document 8633 (Œ≥=0.677): Another TWICE album review, track-by-track</p></li>
<li><p>Document 16256 (Œ≥=0.656): TXT album review analyzing 8 tracks</p></li>
</ul>
<p><strong>Validation of Topic 1:</strong></p>
<ul>
<li><p>Heavy focus on musical elements: ‚Äúinstrumental,‚Äù ‚Äúsynths,‚Äù ‚Äúchorus,‚Äù ‚Äúbridge,‚Äù ‚Äúvocals‚Äù</p></li>
<li><p>Emotional/evaluative language: ‚Äúlove,‚Äù ‚Äúgreat,‚Äù ‚Äúpretty,‚Äù ‚Äúbeautiful,‚Äù ‚Äúamazing‚Äù</p></li>
<li><p>Personal reactions: ‚ÄúI love,‚Äù ‚ÄúI like,‚Äù ‚Äúthis stood out to me‚Äù</p></li>
<li><p>Minimal mention of: industry drama, fans, groups as entities (focus is on the music itself)</p></li>
</ul>
<p><strong>Example quote:</strong> <em>‚Äúlove the synths at the start, already giving a nice retro vibe and then the percussion comes in and really sells the whole vibe‚Äù</em></p>
<p>This is <strong>exactly</strong> what Topic 1 should capture: individual listeners describing their sensory and emotional experience with music.</p>
<p>Let‚Äôs examine what a ‚Äúpure‚Äù music appreciation comment looks like.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View Topic 2 (Fan Discussions) examples</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>top_docs_with_text <span class="sc">|&gt;</span> </span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(document, gamma, text) <span class="sc">|&gt;</span> </span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## # A tibble: 3 √ó 4
## # Groups:   topic [1]
##   topic document gamma text                                                     
##   &lt;int&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;                                                    
## 1     2    19526 0.449 "Yes, I have been updated on the support the group as a ‚Ä¶
## 2     2     2102 0.447 "exactly, ppl just get so excited any time there's a new‚Ä¶
## 3     2      899 0.432 "When I said coerced I meant hiding their dating life or‚Ä¶</code></pre>
<p><strong>Topic 2 (Fan Discussions) - Top Documents:</strong></p>
<p><strong>What we see:</strong> All three are <strong>analytical discussions about fan behavior and K-pop culture:</strong></p>
<ul>
<li><p>Document 19526 (Œ≥=0.449): ILLIT/LSF hate, JungKook‚Äôs involvement, fan reactions to controversy</p></li>
<li><p>Document 2102 (Œ≥=0.447): Patterns of idol hate/bullying, Haknyeon case, international vs Korean fans</p></li>
<li><p>Document 899 (Œ≥=0.432): Fan policing vs.&nbsp;checking behavior, multiple idol examples (NewJeans, Suga, Irene)</p></li>
</ul>
<p><strong>Validation of Topic 2:</strong></p>
<ul>
<li><p>Focus on <strong>people and fans</strong>: ‚Äúfans feel like,‚Äù ‚Äúpeople get so excited,‚Äù ‚Äúfans police‚Äù</p></li>
<li><p>Causal reasoning: ‚Äúbecause,‚Äù ‚Äúthat‚Äôs why,‚Äù ‚Äúmade me upset that‚Äù</p></li>
<li><p>Community analysis: discussing <strong>how</strong> and <strong>why</strong> fans behave</p></li>
<li><p>Multiple examples: references to many different idols/groups as evidence</p></li>
<li><p>Meta-commentary: analyzing K-pop fandom dynamics itself</p></li>
</ul>
<p><strong>Example quotes:</strong></p>
<ul>
<li><p><em>‚Äúppl just get so excited any time there‚Äôs a new idol that it becomes acceptable to hate and bully‚Äù</em></p></li>
<li><p><em>‚ÄúI just hope Illit gets the justice they deserve because I still can‚Äôt believe what they‚Äôve had to gone through‚Äù</em></p></li>
</ul>
<p><strong>Contrast with Topic 1:</strong></p>
<ul>
<li><p><strong>Topic 1</strong>: ‚ÄúI love this song‚Äù (personal sensory/emotional response)</p></li>
<li><p><strong>Topic 2</strong>: ‚Äúfans think this happened because‚Ä¶‚Äù (collective analysis/reasoning)</p></li>
</ul>
<p>This is <strong>exactly</strong> what Topic 2 should capture: fans discussing and analyzing the community, behaviors, and cultural dynamics rather than the music content itself.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View Topic 3 (Rules/Moderation) examples</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>top_docs_with_text <span class="sc">|&gt;</span> </span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">|&gt;</span> </span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(document, gamma, text) <span class="sc">|&gt;</span> </span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## # A tibble: 3 √ó 4
## # Groups:   topic [1]
##   topic document gamma text                                                     
##   &lt;int&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;                                                    
## 1     3     3842 0.732 "Hey u/Fun-Home-605, thank you for submitting to r/kpop!‚Ä¶
## 2     3     2888 0.728 "Hey u/DaGayEnby, thank you for submitting to r/kpop! Un‚Ä¶
## 3     3     3856 0.728 "Hey u/calikim_mo, thank you for submitting to r/kpop! U‚Ä¶</code></pre>
<p><strong>Topic 3 (Rules/Moderation) - Top Documents:</strong></p>
<p><strong>What we see:</strong> All three are <strong>identical automated moderator removal messages:</strong></p>
<ul>
<li><p>Document 3842 (Œ≥=0.732): Removal message to user Fun-Home-605</p></li>
<li><p>Document 2888 (Œ≥=0.728): Removal message to user DaGayEnby</p></li>
<li><p>Document 3856 (Œ≥=0.728): Removal message to user calikim_mo</p></li>
</ul>
<p><strong>Validation of Topic 3:</strong></p>
<ul>
<li><p><strong>Formulaic structure</strong>: ‚ÄúHey u/[username], thank you for submitting to r/kpop! Unfortunately‚Ä¶‚Äù</p></li>
<li><p><strong>Rule vocabulary</strong>: ‚Äúsubmission has been removed,‚Äù ‚Äúrules,‚Äù ‚Äúmodmail,‚Äù ‚Äúrefer to the rules‚Äù</p></li>
<li><p><strong>Repetitive content</strong>: Exact same bullet-pointed list of r/kpoppers content types</p></li>
<li><p><strong>Administrative language</strong>: ‚Äúlocked,‚Äù ‚Äúsend a modmail,‚Äù ‚Äúplease refer to‚Äù</p></li>
<li><p><strong>Zero musical/fan discussion content</strong>: These are pure meta-subreddit administration</p></li>
</ul>
<p><strong>Example structure:</strong></p>
<pre><code>1. Greeting + removal notice
2. Reason for removal ("Casual or Fan-Made content")
3. Alternative subreddit suggestion (r/kpoppers)
4. Detailed list of what belongs in r/kpoppers
5. Closing instructions (modmail, rules link)</code></pre>
<p><strong>Why gamma is so high (&gt;0.72):</strong></p>
<p>These documents are <strong>nearly identical copies</strong> of each other, using the exact same template. They form a tight cluster of purely administrative text with minimal vocabulary overlap with organic discussions.</p>
<p><strong>Research implications:</strong></p>
<ul>
<li><p>Documents with high Topic 3 gamma should be <strong>filtered out</strong> for analyses of fan discourse</p></li>
<li><p>Easy to identify: Look for ‚ÄúThank you for submitting‚Äù or author=‚Äúkpop-ModTeam‚Äù</p></li>
<li><p>These represent ~10-15% of corpus but aren‚Äôt actual user-generated content</p></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View Topic 4 (Groups/Industry) examples</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>top_docs_with_text <span class="sc">|&gt;</span> </span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> </span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(document, gamma, text) <span class="sc">|&gt;</span> </span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## # A tibble: 3 √ó 4
## # Groups:   topic [1]
##   topic document gamma text                                                     
##   &lt;int&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;                                                    
## 1     4     6834 0.567 "Katseye meets all these requirements listed down below ‚Ä¶
## 2     4    17376 0.563 "This is a girl band group that debuted in 2023, surpass‚Ä¶
## 3     4     6860 0.547 "You need two recommendations from academy members to ap‚Ä¶</code></pre>
<p><strong>Topic 4 (Groups/Industry) - Top Documents:</strong></p>
<p><strong>What we see:</strong> All three focus on <strong>groups‚Äô industry achievements, requirements, and metrics:</strong></p>
<ul>
<li><p>Document 13877 (Œ≥=0.728): KATSEYE Grammy Academy membership requirements (detailed criteria)</p></li>
<li><p>Document 10133 (Œ≥=0.622): Korean girl band‚Äôs chart performance, awards, concerts (MMA, MAMA, KCON)</p></li>
<li><p>Document 7389 (Œ≥=0.612): HYBE groups‚Äô Grammy membership eligibility (BTS, Bang PD)</p></li>
</ul>
<p><strong>Validation of Topic 4:</strong></p>
<ul>
<li><p>*Groups as entities**: KATSEYE, BTS, (G)I-DLE, IZ*ONE, band groups</p></li>
<li><p>*Industry metrics**: ‚Äúchart,‚Äù ‚Äúawards,‚Äù ‚Äúdebut,‚Äù ‚Äústreaming stats,‚Äù ‚Äútouring dates‚Äù</p></li>
<li><p><strong>Business language</strong>: ‚Äúrequirements,‚Äù ‚Äúcommercially distributed,‚Äù ‚Äúacademy membership,‚Äù ‚Äúcredits‚Äù</p></li>
<li><p><strong>Achievement focus</strong>: ‚Äúwon awards,‚Äù ‚Äútopped music shows,‚Äù ‚Äú3-day concert,‚Äù ‚Äú#1 spot‚Äù</p></li>
<li><p><strong>Temporal framing</strong>: ‚Äúdebuted in 2023,‚Äù ‚Äú4th generation,‚Äù ‚Äúless than two years after debut‚Äù</p></li>
</ul>
<p><strong>Example quotes:</strong></p>
<ul>
<li><p><em>‚ÄúTwelve commercially distributed, verifiable credits in a single creative profession‚Äù</em></p></li>
<li><p><em>‚Äúno 4th or 5th generation girl group has ever held a 3-day concert at the Handball Gymnasium‚Äù</em></p></li>
<li><p><em>‚ÄúThey even topped music shows three times without ever appearing on them‚Äù</em></p></li>
</ul>
<p><strong>Contrast with other topics:</strong></p>
<ul>
<li><p><strong>Topic 1</strong>: ‚ÄúI love the instrumental‚Äù (music appreciation)</p></li>
<li><p><strong>Topic 2</strong>: ‚Äúfans think this because‚Ä¶‚Äù (community analysis)</p></li>
<li><p><strong>Topic 4</strong>: ‚ÄúThis group achieved X metric‚Äù (industry performance)</p></li>
</ul>
<p><strong>Why this vocabulary appears:</strong></p>
<p>Top words for Topic 4 were: <strong>group, music, groups, year, years, time, show, bts, big, debut</strong></p>
<p>All three documents heavily use these terms to discuss groups‚Äô careers, timelines, and achievements.</p>
<p><strong>Research implications:</strong></p>
<ul>
<li><p>Topic 4 captures <strong>structural/factual</strong> discussions about K-pop industry</p></li>
<li><p>Focus on measurable success indicators</p></li>
<li><p>Groups discussed as <strong>professional entities</strong> rather than artistic creators or fan objects</p></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View Topic 5 (HYBE-ADOR) examples</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>top_docs_with_text <span class="sc">|&gt;</span> </span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(topic <span class="sc">==</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(document, gamma, text) <span class="sc">|&gt;</span> </span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## # A tibble: 3 √ó 4
## # Groups:   topic [1]
##   topic document gamma text                                                     
##   &lt;int&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;                                                    
## 1     5    17731 0.832 "This is by Star News.\n\n**Please keep in mind that thi‚Ä¶
## 2     5    17958 0.827 "This is the summary of the hearing today by Daily Sport‚Ä¶
## 3     5    11269 0.824 "This is by Newsen.\n\n[**[Official] HYBE Responds to De‚Ä¶</code></pre>
<p><strong>Topic 5 (HYBE-ADOR) - Top Documents:</strong></p>
<p><strong>What we see:</strong> All three are <strong>detailed legal updates about the HYBE-ADOR-NewJeans court case:</strong></p>
<ul>
<li><p>Document 6237 (Œ≥=0.612): ADOR‚Äôs court arguments claiming Min Heejin orchestrated contract termination</p></li>
<li><p>Document 6259 (Œ≥=0.610): Full hearing summary of both sides‚Äô arguments, court mediation</p></li>
<li><p>Document 5935 (Œ≥=0.604): HYBE‚Äôs official statement about appealing Min Heejin‚Äôs non-prosecution</p></li>
</ul>
<p><strong>Validation of Topic 5:</strong></p>
<ul>
<li><p><strong>Key entities</strong>: HYBE, ADOR, Min Hee-jin (MHJ), NewJeans, ILLIT mentioned repeatedly</p></li>
<li><p><strong>Legal terminology</strong>: ‚Äúexclusive contract,‚Äù ‚Äúbreach of trust,‚Äù ‚Äúprovisional injunction,‚Äù ‚Äúcourt,‚Äù ‚Äúlawsuit‚Äù</p></li>
<li><p><strong>Specific case details</strong>: ‚ÄúKakaoTalk messages,‚Äù ‚Äúcontract termination,‚Äù ‚Äúcorrective response,‚Äù ‚Äú30-day retention period‚Äù</p></li>
<li><p><strong>Timeline references</strong>: ‚ÄúApril last year,‚Äù ‚Äúlast March,‚Äù ‚ÄúJuly 15,‚Äù ‚ÄúNewJeans‚Äô termination‚Äù</p></li>
<li><p><strong>Multiple parties‚Äô perspectives</strong>: ADOR‚Äôs claims vs.&nbsp;NewJeans‚Äô claims vs.&nbsp;HYBE‚Äôs statements</p></li>
</ul>
<p><strong>Example quotes:</strong></p>
<ul>
<li><p><em>‚ÄúMin Hee-jin was behind NewJeans‚Äô termination of the exclusive contract from start to finish‚Äù</em></p></li>
<li><p><em>‚ÄúThe ADOR we trusted and signed contracts with no longer exists‚Äù</em></p></li>
<li><p><em>‚Äúthe appellate court ruled that former CEO Min is ‚Äòintentionally undermining the integrated structure‚Äô‚Äù</em></p></li>
</ul>
<p><strong>Why this is Topic 5:</strong></p>
<p>Top words were: <strong>hybe, mhj, newjeans, ador, case, illit, contract, side, court, members</strong></p>
<p>All three documents are saturated with these exact terms in legal/business contexts.</p>
<p><strong>Contrast with other topics:</strong></p>
<ul>
<li><p><strong>Topic 1</strong>: Music appreciation (‚ÄúI love the song‚Äù)</p></li>
<li><p><strong>Topic 2</strong>: Fan community analysis (‚Äúfans think‚Ä¶‚Äù)</p></li>
<li><p><strong>Topic 4</strong>: General industry achievements (‚Äúgroup won awards‚Äù)</p></li>
<li><p><strong>Topic 5</strong>: Specific ongoing legal controversy (proper nouns, legal terms, court proceedings)</p></li>
</ul>
<p><strong>Research implications:</strong></p>
<ul>
<li><p>Topic 5 is <strong>time-specific</strong> to July 2024 controversy</p></li>
<li><p>May not generalize to other time periods</p></li>
<li><p>Captures how major industry conflicts dominate discourse</p></li>
<li><p>Shows LDA can identify <strong>event-driven topics</strong> alongside structural ones</p></li>
</ul>
<p><strong>Document characteristics:</strong></p>
<ul>
<li><p>Extremely long (1000+ words typical)</p></li>
<li><p>Translation disclaimers (Korean legal documents)</p></li>
<li><p>Formal news article structure</p></li>
<li><p>Heavy quotation of official statements</p></li>
</ul>
<hr>
<hr>
</section>
<section id="summary-of-representative-documents" class="level3">
<h3 class="anchored" data-anchor-id="summary-of-representative-documents">5.11 Summary of Representative Documents</h3>
<p><strong>What did we learn from examining high-gamma documents?</strong></p>
<p>After examining the top 3 documents for each topic, we can now validate our LDA model‚Äôs quality:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Topic</strong></th>
<th><strong>Top Gamma</strong></th>
<th><strong>Document Type</strong></th>
<th><strong>Validation</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Topic 1: Music</strong></td>
<td>0.768</td>
<td>Album reviews (track-by-track)</td>
<td>Perfect match: Heavy use of ‚Äúsong,‚Äù ‚Äúlove,‚Äù ‚Äúinstrumental,‚Äù ‚Äúchorus‚Äù</td>
</tr>
<tr class="even">
<td><strong>Topic 2: Discussions</strong></td>
<td>0.449</td>
<td>Fan behavior analysis</td>
<td>Perfect match: Focuses on ‚Äúpeople,‚Äù ‚Äúfans,‚Äù causal reasoning</td>
</tr>
<tr class="odd">
<td><strong>Topic 3: Rules</strong></td>
<td>0.732</td>
<td>Automated mod removal messages</td>
<td>Perfect match: Identical formulaic administrative text</td>
</tr>
<tr class="even">
<td><strong>Topic 4: Groups</strong></td>
<td>0.728</td>
<td>Industry achievements/metrics</td>
<td>Perfect match: Chart performance, awards, debut timelines</td>
</tr>
<tr class="odd">
<td><strong>Topic 5: HYBE</strong></td>
<td>0.612</td>
<td>Legal case updates</td>
<td>Perfect match: Court proceedings, contract disputes</td>
</tr>
</tbody>
</table>
<p><strong>Key Findings:</strong></p>
<p><strong>1. Topic 3 has the highest gamma values (0.73+)</strong></p>
<ul>
<li><p>Why? Moderator messages are <strong>identical copies</strong> of template text</p></li>
<li><p>Very narrow vocabulary, minimal variation</p></li>
<li><p>These cluster tightly because they‚Äôre literally the same document repeated</p></li>
</ul>
<p><strong>2. Topic 2 has the lowest gamma values (0.45 max)</strong></p>
<ul>
<li><p>Why? Fan discussions are <strong>naturally multifaceted</strong></p></li>
<li><p>Real discourse blends reasoning, examples, multiple topics</p></li>
<li><p>Even ‚Äúpure‚Äù discussion comments touch on multiple themes</p></li>
</ul>
<p><strong>3. All topics validated with actual content</strong></p>
<ul>
<li><p>Top documents perfectly match our beta-based interpretations</p></li>
<li><p>Word lists (from Section 5.4) align with document themes</p></li>
<li><p>No topic needs reinterpretation</p></li>
</ul>
<p><strong>4. Gamma thresholds reveal document types:</strong></p>
<ul>
<li><p><strong>Gamma &gt; 0.7</strong>: Formulaic/template text (mod messages)</p></li>
<li><p><strong>Gamma = 0.6-0.7</strong>: Long-form focused content (album reviews, legal updates)</p></li>
<li><p><strong>Gamma = 0.4-0.5</strong>: Organic multi-topical discussions</p></li>
</ul>
<p><strong>What makes a document ‚Äúrepresentative‚Äù?</strong></p>
<p>A high gamma value (close to 1.0) means:</p>
<ol type="1">
<li><p><strong>Vocabulary concentration</strong>: Document uses words almost exclusively from one topic‚Äôs vocabulary</p></li>
<li><p><strong>Thematic purity</strong>: Little mixing with other topics‚Äô themes</p></li>
<li><p><strong>Predictability</strong>: If you see high gamma, you know exactly what the document contains</p></li>
</ol>
<p><strong>Expected vs.&nbsp;Actual:</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Topic</strong></th>
<th><strong>Expected High-Gamma Docs</strong></th>
<th><strong>What We Actually Found</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Topic 1</td>
<td>Album reviews</td>
<td>Track-by-track reviews (TWICE, TXT)</td>
</tr>
<tr class="even">
<td>Topic 2</td>
<td>General fan chats</td>
<td>Meta-discussions about fandom behavior</td>
</tr>
<tr class="odd">
<td>Topic 3</td>
<td>Mod messages</td>
<td>Identical automated removal notices</td>
</tr>
<tr class="even">
<td>Topic 4</td>
<td>Group news</td>
<td>Achievement lists, Grammy requirements</td>
</tr>
<tr class="odd">
<td>Topic 5</td>
<td>HYBE news</td>
<td>Court case legal summaries</td>
</tr>
</tbody>
</table>
<p><strong>Why is this validation important?</strong></p>
<p><strong>1. Confirms model quality:</strong></p>
<ul>
<li><p>If top documents didn‚Äôt match topic interpretations, we‚Äôd need to retrain</p></li>
<li><p>Perfect alignment means K=5 captures meaningful structure</p></li>
</ul>
<p><strong>2. Enables filtering:</strong></p>
<ul>
<li><p>Can remove Topic 3 documents (gamma &gt; 0.7) for analysis of organic discourse</p></li>
<li><p>Can identify event-specific content (Topic 5) vs.&nbsp;structural patterns (Topics 1, 2, 4)</p></li>
</ul>
<p><strong>3. Supports coding/annotation:</strong></p>
<ul>
<li><p>High-gamma documents are perfect training examples</p></li>
<li><p>Can use for manual content analysis or supervised learning</p></li>
</ul>
<p><strong>4. Reveals discourse patterns:</strong></p>
<ul>
<li><p>Topic 1 and 3: Highly focused (album reviews, admin messages)</p></li>
<li><p>Topic 2: Naturally multifaceted (fan discussions blend themes)</p></li>
<li><p>Topic 5: Event-driven (July 2024 specific)</p></li>
</ul>
<p><strong>Limitations to note:</strong></p>
<p><strong>1. Sample bias:</strong> We only looked at top 3 documents per topic</p>
<ul>
<li><p>Most documents have <strong>mixed</strong> topics (lower gamma)</p></li>
<li><p>These extremes show the ‚Äúideal types‚Äù but aren‚Äôt typical</p></li>
</ul>
<p><strong>2. Time specificity:</strong> Topic 5 (HYBE) is July 2025-specific</p>
<ul>
<li><p>Wouldn‚Äôt appear in data from other months/years</p></li>
<li><p>Shows how LDA captures temporal events alongside structural patterns</p></li>
</ul>
<p><strong>3. Template text dominates:</strong> Topic 3 has artificially high gamma</p>
<ul>
<li><p>Should be filtered out for analysis of user-generated content</p></li>
<li><p>Represents approximately 10-15% of corpus but minimal informational content</p></li>
</ul>
<p><strong>Next Steps:</strong></p>
<p>Now that we‚Äôve validated topics qualitatively, let‚Äôs examine them quantitatively:</p>
<ul>
<li><p>How many documents belong primarily to each topic?</p></li>
<li><p>What‚Äôs the distribution of dominant topics across the corpus?</p></li>
<li><p>Are most documents single-topic or multi-topic?</p></li>
</ul>
<hr>
</section>
<section id="distribution-of-dominant-topics" class="level3">
<h3 class="anchored" data-anchor-id="distribution-of-dominant-topics">5.12 Distribution of Dominant Topics</h3>
<p>Let‚Äôs see how many documents are <strong>primarily</strong> about each topic:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the dominant topic for each document</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>dominant_topics <span class="ot">&lt;-</span> lda_documents <span class="sc">|&gt;</span> </span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(document) <span class="sc">|&gt;</span> </span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(gamma, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Count documents by dominant topic</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>topic_distribution <span class="ot">&lt;-</span> dominant_topics <span class="sc">|&gt;</span> </span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(topic) <span class="sc">|&gt;</span> </span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Display as a formatted table</span></span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(topic_distribution, <span class="at">digits =</span> <span class="dv">2</span>, </span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Topic"</span>, <span class="st">"Number of Documents"</span>, <span class="st">"Percentage (%)"</span>),</span>
<span id="cb113-16"><a href="#cb113-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Distribution of Dominant Topics"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: right;">Topic</th>
<th style="text-align: right;">Number of Documents</th>
<th style="text-align: right;">Percentage (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">7861</td>
<td style="text-align: right;">28.28</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">6286</td>
<td style="text-align: right;">22.61</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2865</td>
<td style="text-align: right;">10.31</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">6049</td>
<td style="text-align: right;">21.76</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">4736</td>
<td style="text-align: right;">17.04</td>
</tr>
</tbody>
</table>
<p>Distribution of Dominant Topics</p>
<hr>
</section>
<section id="distribution-of-dominant-topics-1" class="level3">
<h3 class="anchored" data-anchor-id="distribution-of-dominant-topics-1">5.12 Distribution of Dominant Topics</h3>
<p>Let‚Äôs see how many documents are <strong>primarily</strong> about each topic:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the dominant topic for each document</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>dominant_topics <span class="ot">&lt;-</span> lda_documents <span class="sc">|&gt;</span> </span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(document) <span class="sc">|&gt;</span> </span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(gamma, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Count documents by dominant topic</span></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>topic_distribution <span class="ot">&lt;-</span> dominant_topics <span class="sc">|&gt;</span> </span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(topic) <span class="sc">|&gt;</span> </span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(topic_distribution, </span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Topic"</span>, <span class="st">"Number of Documents"</span>, <span class="st">"Percentage (%)"</span>),</span>
<span id="cb114-14"><a href="#cb114-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">"Distribution of Dominant Topics"</span>,</span>
<span id="cb114-15"><a href="#cb114-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: right;">Topic</th>
<th style="text-align: right;">Number of Documents</th>
<th style="text-align: right;">Percentage (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">7861</td>
<td style="text-align: right;">28.28</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">6286</td>
<td style="text-align: right;">22.61</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2865</td>
<td style="text-align: right;">10.31</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">6049</td>
<td style="text-align: right;">21.76</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">4736</td>
<td style="text-align: right;">17.04</td>
</tr>
</tbody>
</table>
<p>Distribution of Dominant Topics</p>
<p><strong>Results:</strong></p>
<ul>
<li><p><strong>Topic 1 (Music Appreciation)</strong>: 7,861 documents (28.28%)</p></li>
<li><p><strong>Topic 2 (Fan Discussions)</strong>: 6,286 documents (22.61%)</p></li>
<li><p><strong>Topic 3 (Rules/Moderation)</strong>: 2,865 documents (10.31%)</p></li>
<li><p><strong>Topic 4 (Groups/Industry)</strong>: 6,049 documents (21.76%)</p></li>
<li><p><strong>Topic 5 (HYBE-ADOR Controversy)</strong>: 4,736 documents (17.04%)</p></li>
</ul>
<p><strong>Total</strong>: 27,797 documents analyzed</p>
<p><strong>Key Findings:</strong></p>
<p><strong>1. Relatively Balanced Distribution</strong></p>
<ul>
<li><p>No single topic dominates discourse (largest is only 28%)</p></li>
<li><p>Topics 1, 2, 4 form the ‚Äúbig three‚Äù (72% combined)</p></li>
<li><p>Suggests diverse community interests</p></li>
</ul>
<p><strong>2. Music Appreciation is Most Common (28.28%)</strong></p>
<ul>
<li><p>Album reviews, track-by-track analysis, listening experiences</p></li>
<li><p>Confirms r/kpop is fundamentally about the music itself</p></li>
<li><p>Nearly 1 in 3 comments focuses on musical content</p></li>
</ul>
<p><strong>3. Fan Discussions are Second (22.61%)</strong></p>
<ul>
<li><p>Meta-commentary about fandom behavior</p></li>
<li><p>Community analysis, fan culture discussions</p></li>
<li><p>Shows community is self-reflective</p></li>
</ul>
<p><strong>4. Rules/Moderation is Smallest (10.31%)</strong></p>
<ul>
<li><p>Only ~3,000 automated mod messages out of 28,000 documents</p></li>
<li><p>Confirms these are repetitive but not overwhelming</p></li>
<li><p>Safe to filter out for organic discourse analysis</p></li>
</ul>
<p><strong>5. HYBE Controversy is Substantial (17.04%)</strong></p>
<ul>
<li><p>Nearly 1 in 5 comments about the legal dispute</p></li>
<li><p>Shows July 2025 was heavily influenced by this event</p></li>
<li><p>Time-specific: would likely be 0% in other months</p></li>
</ul>
<p><strong>6. Groups/Industry News is Major Topic (21.76%)</strong></p>
<ul>
<li><p>Charts, achievements, debuts, awards</p></li>
<li><p>Shows community tracks industry metrics closely</p></li>
<li><p>Nearly equal to fan discussions</p></li>
</ul>
<p><strong>Interpretation:</strong></p>
<p><strong>What this tells us about r/kpop in July 2025:</strong></p>
<p><strong>Balanced Community Interests:</strong></p>
<ul>
<li><p>Unlike some fan communities that focus solely on one aspect</p></li>
<li><p>r/kpop engages with music (28%), meta-discussion (23%), industry (22%), and events (17%)</p></li>
<li><p>Diverse discourse ecosystem</p></li>
</ul>
<p><strong>Event Impact:</strong></p>
<ul>
<li><p>Topic 5 (HYBE) at 17% shows significant but not overwhelming event influence</p></li>
<li><p>83% of discourse continues on structural topics (music, fans, groups)</p></li>
<li><p>Community maintains baseline interests even during major controversies</p></li>
</ul>
<p><strong>Music Remains Central:</strong></p>
<ul>
<li><p>Despite drama, music appreciation is #1 topic</p></li>
<li><p>Validates subreddit‚Äôs mission as music-focused community</p></li>
<li><p>Positive sign: not purely gossip/drama-driven</p></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize the distribution</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(topic_distribution, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(topic), <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">format</span>(n, <span class="at">big.mark =</span> <span class="st">","</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>, </span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">round</span>(percentage, <span class="dv">1</span>), <span class="st">"%)"</span>)), </span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"1"</span> <span class="ot">=</span> <span class="st">"coral"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"darkgoldenrod3"</span>, <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"darkseagreen"</span>, </span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a>               <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"steelblue"</span>, <span class="st">"5"</span> <span class="ot">=</span> <span class="st">"orchid3"</span>),</span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"1: Music"</span>, <span class="st">"2: Discussions"</span>, <span class="st">"3: Rules"</span>, <span class="st">"4: Groups"</span>, <span class="st">"5: HYBE"</span>)</span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Dominant Topics Across All Documents"</span>,</span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Each document assigned to topic with highest gamma value (July 2025)"</span>,</span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Topic"</span>,</span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of Documents"</span>,</span>
<span id="cb115-17"><a href="#cb115-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Topic"</span></span>
<span id="cb115-18"><a href="#cb115-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb115-19"><a href="#cb115-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb115-20"><a href="#cb115-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb115-21"><a href="#cb115-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma, </span>
<span id="cb115-22"><a href="#cb115-22" aria-hidden="true" tabindex="-1"></a>                     <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">mult =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.15</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-36-1.png" class="img-fluid"><!-- --></p>
<p><strong>Research Questions Answered:</strong></p>
<p><strong>1. What do K-pop fans talk about most?</strong></p>
<ul>
<li><p>Answer: Music appreciation (28%), but closely followed by fan discussions (23%) and industry news (22%)</p></li>
<li><p>No single obsession - balanced engagement</p></li>
</ul>
<p><strong>2. Is the HYBE controversy dominating discourse?</strong></p>
<ul>
<li><p>Answer: No.&nbsp;At 17%, it‚Äôs substantial but not dominant</p></li>
<li><p>5 out of 6 comments are about other topics</p></li>
<li><p>Shows community resilience to event-driven discourse</p></li>
</ul>
<p><strong>3. How much is meta-discussion vs.&nbsp;content discussion?</strong></p>
<ul>
<li><p><strong>Meta (Rules)</strong>: 10.31%</p></li>
<li><p><strong>Content (Music + Groups + Events)</strong>: 67.08%</p></li>
<li><p><strong>Community/Fans</strong>: 22.61%</p></li>
<li><p>Clear preference for content over administration</p></li>
</ul>
<p><strong>4. Are discussions focused or diffuse?</strong></p>
<ul>
<li><p>This shows <strong>forced</strong> single-topic assignment</p></li>
<li><p>Remember: most documents are mixed (low gamma values from Section 5.8)</p></li>
<li><p>These percentages show plurality, not purity</p></li>
</ul>
<p><strong>Important Caveat:</strong></p>
<p>This analysis assigns each document to its <strong>dominant</strong> topic, but:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How many documents have a CLEAR dominant topic (gamma &gt; 0.5)?</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>clear_dominance <span class="ot">&lt;-</span> dominant_topics <span class="sc">|&gt;</span> </span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(gamma <span class="sc">&gt;</span> <span class="fl">0.5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>total_docs <span class="ot">&lt;-</span> <span class="fu">nrow</span>(dominant_topics)</span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>mixed_topics <span class="ot">&lt;-</span> total_docs <span class="sc">-</span> clear_dominance</span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Documents with clear dominant topic (gamma &gt; 0.5):"</span>, </span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format</span>(clear_dominance, <span class="at">big.mark =</span> <span class="st">","</span>), </span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">"("</span>, <span class="fu">round</span>(clear_dominance<span class="sc">/</span>total_docs <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%)"</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## Documents with clear dominant topic (gamma &gt; 0.5): 462 (1.7%)</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Documents with mixed topics (gamma &lt; 0.5):"</span>, </span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format</span>(mixed_topics, <span class="at">big.mark =</span> <span class="st">","</span>),</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">"("</span>, <span class="fu">round</span>(mixed_topics<span class="sc">/</span>total_docs <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%)"</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## Documents with mixed topics (gamma &lt; 0.5): 27,335 (98.3%)</code></pre>
<p><strong>What this means:</strong></p>
<ul>
<li><p>A document with gamma = [0.25, 0.24, 0.21, 0.18, 0.12] gets assigned to Topic 1</p></li>
<li><p>But it‚Äôs really <strong>balanced across all topics</strong> (only 25% Topic 1)</p></li>
<li><p>The gamma &gt; 0.5 analysis shows how many are <strong>truly</strong> single-topic</p></li>
</ul>
<p><strong>Class exercise</strong></p>
<p>Redo the graph and the table for gamma &gt; 0.5 and compare the difference</p>
<hr>
</section>
<section id="topics-over-time" class="level3">
<h3 class="anchored" data-anchor-id="topics-over-time">5.13 Topics Over Time</h3>
<p>Now let‚Äôs see how topics change throughout July 2025 using <strong>average gamma values</strong> (not just dominant topics):</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First, let's check the date range in our data</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>date_range <span class="ot">&lt;-</span> data3 <span class="sc">|&gt;</span> </span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">start_date =</span> <span class="fu">min</span>(date),</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">end_date =</span> <span class="fu">max</span>(date),</span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_days =</span> <span class="fu">as.numeric</span>(<span class="fu">difftime</span>(<span class="fu">max</span>(date), <span class="fu">min</span>(date), <span class="at">units =</span> <span class="st">"days"</span>))</span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Date Range:"</span>, <span class="fu">format</span>(date_range<span class="sc">$</span>start_date, <span class="st">"%B %d, %Y"</span>), </span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"to"</span>, <span class="fu">format</span>(date_range<span class="sc">$</span>end_date, <span class="st">"%B %d, %Y"</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## Date Range: July 01, 2025 to July 31, 2025</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Total Days:"</span>, date_range<span class="sc">$</span>total_days, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## Total Days: 30</code></pre>
<p><strong>Results:</strong></p>
<ul>
<li><p><strong>Start Date</strong>: July 1, 2025</p></li>
<li><p><strong>End Date</strong>: July 31, 2025</p></li>
<li><p><strong>Total Days</strong>: 30 days (complete month)</p></li>
</ul>
<p><strong>Prepare temporal data with ALL topics:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Join ALL topic-document probabilities with date information</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>topics_over_time <span class="ot">&lt;-</span> lda_documents <span class="sc">|&gt;</span> </span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">document =</span> <span class="fu">as.integer</span>(document)) <span class="sc">|&gt;</span> </span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>    data3 <span class="sc">|&gt;</span> <span class="fu">select</span>(comment_index, date),</span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"document"</span> <span class="ot">=</span> <span class="st">"comment_index"</span>)</span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for any missing dates</span></span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a>missing_dates <span class="ot">&lt;-</span> topics_over_time <span class="sc">|&gt;</span> </span>
<span id="cb124-11"><a href="#cb124-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(date)) <span class="sc">|&gt;</span> </span>
<span id="cb124-12"><a href="#cb124-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb124-13"><a href="#cb124-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-14"><a href="#cb124-14" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Documents with missing dates:"</span>, missing_dates, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## Documents with missing dates: 0</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Total topic-document pairs:"</span>, <span class="fu">nrow</span>(topics_over_time), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## Total topic-document pairs: 111580</code></pre>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Unique documents:"</span>, <span class="fu">length</span>(<span class="fu">unique</span>(topics_over_time<span class="sc">$</span>document)), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>## Unique documents: 22316</code></pre>
<p><strong>Important difference from Section 5.12:</strong></p>
<ul>
<li><p><strong>Section 5.12</strong>: Counted documents by dominant topic (forced single assignment)</p></li>
<li><p><strong>Section 5.13</strong>: Uses average gamma across ALL documents each day</p></li>
<li><p><strong>Why better</strong>: Captures mixed-topic nature and true topic prevalence</p></li>
</ul>
<p><strong>Daily Average Gamma by Topic:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate daily average gamma for each topic</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>daily_topic_averages <span class="ot">&lt;-</span> topics_over_time <span class="sc">|&gt;</span> </span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date, topic) <span class="sc">|&gt;</span> </span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_gamma =</span> <span class="fu">mean</span>(gamma),</span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_gamma =</span> <span class="fu">median</span>(gamma),</span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_docs =</span> <span class="fu">n_distinct</span>(document),</span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot daily average gamma</span></span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(daily_topic_averages, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> mean_gamma, <span class="at">color =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb130-14"><a href="#cb130-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb130-15"><a href="#cb130-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb130-16"><a href="#cb130-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"1"</span> <span class="ot">=</span> <span class="st">"coral"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"darkgoldenrod3"</span>, <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"darkseagreen"</span>, </span>
<span id="cb130-17"><a href="#cb130-17" aria-hidden="true" tabindex="-1"></a>               <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"steelblue"</span>, <span class="st">"5"</span> <span class="ot">=</span> <span class="st">"orchid3"</span>),</span>
<span id="cb130-18"><a href="#cb130-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"1: Music"</span>, <span class="st">"2: Discussions"</span>, <span class="st">"3: Rules"</span>, <span class="st">"4: Groups"</span>, <span class="st">"5: HYBE"</span>)</span>
<span id="cb130-19"><a href="#cb130-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb130-20"><a href="#cb130-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">"3 days"</span>, <span class="at">date_labels =</span> <span class="st">"%b %d"</span>) <span class="sc">+</span></span>
<span id="cb130-21"><a href="#cb130-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb130-22"><a href="#cb130-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb130-23"><a href="#cb130-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Daily Average Topic Prevalence (July 2025)"</span>,</span>
<span id="cb130-24"><a href="#cb130-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Mean gamma (topic probability) across all documents each day"</span>,</span>
<span id="cb130-25"><a href="#cb130-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb130-26"><a href="#cb130-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Topic Probability (Gamma)"</span>,</span>
<span id="cb130-27"><a href="#cb130-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Topic"</span></span>
<span id="cb130-28"><a href="#cb130-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb130-29"><a href="#cb130-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb130-30"><a href="#cb130-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb130-31"><a href="#cb130-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb130-32"><a href="#cb130-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span></span>
<span id="cb130-33"><a href="#cb130-33" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-41-1.png" class="img-fluid"><!-- --></p>
<p><strong>What this shows:</strong></p>
<ul>
<li><p><strong>Y-axis</strong>: Average probability that a random comment on that day belongs to each topic</p></li>
<li><p><strong>Higher line</strong>: Topic is more prevalent in discourse that day</p></li>
<li><p><strong>Lines sum to 1.0</strong>: On any given day, all topic probabilities add to 100%</p></li>
<li><p><strong>Changes over time</strong>: Shows how topic prevalence shifts through the month</p></li>
</ul>
<p><strong>Smoothed Trends (LOESS):</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Smooth trends with loess</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(daily_topic_averages, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> mean_gamma, <span class="at">color =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">size =</span> <span class="fl">1.2</span>, <span class="at">span =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"1"</span> <span class="ot">=</span> <span class="st">"coral"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"darkgoldenrod3"</span>, <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"darkseagreen"</span>, </span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"steelblue"</span>, <span class="st">"5"</span> <span class="ot">=</span> <span class="st">"orchid3"</span>),</span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"1: Music"</span>, <span class="st">"2: Discussions"</span>, <span class="st">"3: Rules"</span>, <span class="st">"4: Groups"</span>, <span class="st">"5: HYBE"</span>)</span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">"3 days"</span>, <span class="at">date_labels =</span> <span class="st">"%b %d"</span>) <span class="sc">+</span></span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb131-11"><a href="#cb131-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb131-12"><a href="#cb131-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Smoothed Topic Prevalence Trends (July 2025)"</span>,</span>
<span id="cb131-13"><a href="#cb131-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"LOESS smoothing (span=0.3) shows underlying patterns in average gamma"</span>,</span>
<span id="cb131-14"><a href="#cb131-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb131-15"><a href="#cb131-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Topic Probability (Gamma)"</span>,</span>
<span id="cb131-16"><a href="#cb131-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Topic"</span></span>
<span id="cb131-17"><a href="#cb131-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb131-18"><a href="#cb131-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb131-19"><a href="#cb131-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb131-20"><a href="#cb131-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb131-21"><a href="#cb131-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span></span>
<span id="cb131-22"><a href="#cb131-22" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-42-1.png" class="img-fluid"><!-- --></p>
<p><strong>Why smoothing matters:</strong></p>
<ul>
<li><p>Daily data has noise (random variation in comment mix)</p></li>
<li><p>LOESS reveals the <strong>trend</strong> beneath the noise</p></li>
<li><p>Confidence bands show uncertainty in the trend</p></li>
<li><p>Easier to see if topics are rising, falling, or stable</p></li>
</ul>
<p><strong>Individual Topic Trends (Faceted View):</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Faceted view for each topic</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(daily_topic_averages, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> mean_gamma)) <span class="sc">+</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="fl">0.8</span>, </span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">span =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> topic, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">scales =</span> <span class="st">"free_y"</span>,</span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="at">topic =</span> <span class="fu">c</span>(</span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a>               <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Topic 1: Music Appreciation"</span>,</span>
<span id="cb132-10"><a href="#cb132-10" aria-hidden="true" tabindex="-1"></a>               <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"Topic 2: Fan Discussions"</span>,</span>
<span id="cb132-11"><a href="#cb132-11" aria-hidden="true" tabindex="-1"></a>               <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"Topic 3: Rules/Moderation"</span>,</span>
<span id="cb132-12"><a href="#cb132-12" aria-hidden="true" tabindex="-1"></a>               <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"Topic 4: Groups/Industry"</span>,</span>
<span id="cb132-13"><a href="#cb132-13" aria-hidden="true" tabindex="-1"></a>               <span class="st">"5"</span> <span class="ot">=</span> <span class="st">"Topic 5: HYBE-ADOR Controversy"</span></span>
<span id="cb132-14"><a href="#cb132-14" aria-hidden="true" tabindex="-1"></a>             ))) <span class="sc">+</span></span>
<span id="cb132-15"><a href="#cb132-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">"3 days"</span>, <span class="at">date_labels =</span> <span class="st">"%b %d"</span>) <span class="sc">+</span></span>
<span id="cb132-16"><a href="#cb132-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb132-17"><a href="#cb132-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb132-18"><a href="#cb132-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Individual Topic Trends Over Time (July 2025)"</span>,</span>
<span id="cb132-19"><a href="#cb132-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Daily average gamma with smoothed trend lines (red)"</span>,</span>
<span id="cb132-20"><a href="#cb132-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb132-21"><a href="#cb132-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Topic Probability (Gamma)"</span></span>
<span id="cb132-22"><a href="#cb132-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb132-23"><a href="#cb132-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb132-24"><a href="#cb132-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb132-25"><a href="#cb132-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb132-26"><a href="#cb132-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">11</span>)</span>
<span id="cb132-27"><a href="#cb132-27" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-43-1.png" class="img-fluid"><!-- --></p>
<p><strong>Analyze each panel:</strong></p>
<ul>
<li><p><strong>Topic 1 (Music)</strong>: Look for spikes on album release dates</p></li>
<li><p><strong>Topic 2 (Discussions)</strong>: Should be relatively stable (baseline chatter)</p></li>
<li><p><strong>Topic 3 (Rules)</strong>: Tracks moderation activity intensity</p></li>
<li><p><strong>Topic 4 (Groups)</strong>: Event-driven (awards, charts, debuts)</p></li>
<li><p><strong>Topic 5 (HYBE)</strong>: Should spike on court dates and major announcements</p></li>
</ul>
<p><strong>Day of Week Patterns:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add day of week</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>topics_by_weekday <span class="ot">&lt;-</span> topics_over_time <span class="sc">|&gt;</span> </span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weekday =</span> <span class="fu">weekdays</span>(date)) <span class="sc">|&gt;</span> </span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(weekday, topic) <span class="sc">|&gt;</span> </span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_gamma =</span> <span class="fu">mean</span>(gamma), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weekday =</span> <span class="fu">factor</span>(weekday, </span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a>                         <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Monday"</span>, <span class="st">"Tuesday"</span>, <span class="st">"Wednesday"</span>, </span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">"Thursday"</span>, <span class="st">"Friday"</span>, <span class="st">"Saturday"</span>, <span class="st">"Sunday"</span>)))</span>
<span id="cb133-9"><a href="#cb133-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-10"><a href="#cb133-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(topics_by_weekday, <span class="fu">aes</span>(<span class="at">x =</span> weekday, <span class="at">y =</span> mean_gamma, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb133-11"><a href="#cb133-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb133-12"><a href="#cb133-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb133-13"><a href="#cb133-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"1"</span> <span class="ot">=</span> <span class="st">"coral"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"darkgoldenrod3"</span>, <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"darkseagreen"</span>, </span>
<span id="cb133-14"><a href="#cb133-14" aria-hidden="true" tabindex="-1"></a>               <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"steelblue"</span>, <span class="st">"5"</span> <span class="ot">=</span> <span class="st">"orchid3"</span>),</span>
<span id="cb133-15"><a href="#cb133-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"1: Music"</span>, <span class="st">"2: Discussions"</span>, <span class="st">"3: Rules"</span>, <span class="st">"4: Groups"</span>, <span class="st">"5: HYBE"</span>)</span>
<span id="cb133-16"><a href="#cb133-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb133-17"><a href="#cb133-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb133-18"><a href="#cb133-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb133-19"><a href="#cb133-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Topic Prevalence by Day of Week"</span>,</span>
<span id="cb133-20"><a href="#cb133-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Average gamma (stacked to 100%) by day"</span>,</span>
<span id="cb133-21"><a href="#cb133-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Day of Week"</span>,</span>
<span id="cb133-22"><a href="#cb133-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Topic Probability"</span>,</span>
<span id="cb133-23"><a href="#cb133-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Topic"</span></span>
<span id="cb133-24"><a href="#cb133-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb133-25"><a href="#cb133-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb133-26"><a href="#cb133-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb133-27"><a href="#cb133-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb133-28"><a href="#cb133-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span></span>
<span id="cb133-29"><a href="#cb133-29" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-44-1.png" class="img-fluid"><!-- --></p>
<p><strong>Research Questions:</strong></p>
<ul>
<li><p>Do music discussions increase on weekends (listening time)?</p></li>
<li><p>Does moderation intensity vary by day?</p></li>
<li><p>Are industry announcements timed to specific days?</p></li>
<li><p>Is controversy discussion consistent across the week?</p></li>
</ul>
<p><strong>Weekend vs.&nbsp;Weekday Analysis:</strong></p>
<p><strong>Interpretation:</strong></p>
<ul>
<li><p><strong>Positive difference</strong>: Topic probability increases on weekends</p></li>
<li><p><strong>Negative difference</strong>: Topic probability decreases on weekends</p></li>
<li><p><strong>% Change</strong>: Magnitude of weekend effect</p></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Categorize weekend vs weekday</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>topics_weekend <span class="ot">&lt;-</span> topics_over_time <span class="sc">|&gt;</span> </span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">weekday =</span> <span class="fu">weekdays</span>(date),</span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_weekend =</span> weekday <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Saturday"</span>, <span class="st">"Sunday"</span>)</span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(is_weekend, topic) <span class="sc">|&gt;</span> </span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_gamma =</span> <span class="fu">mean</span>(gamma), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb134-9"><a href="#cb134-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-10"><a href="#cb134-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate difference</span></span>
<span id="cb134-11"><a href="#cb134-11" aria-hidden="true" tabindex="-1"></a>weekend_effect <span class="ot">&lt;-</span> topics_weekend <span class="sc">|&gt;</span> </span>
<span id="cb134-12"><a href="#cb134-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> is_weekend, <span class="at">values_from =</span> mean_gamma, </span>
<span id="cb134-13"><a href="#cb134-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">"weekend_"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb134-14"><a href="#cb134-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb134-15"><a href="#cb134-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">difference =</span> weekend_TRUE <span class="sc">-</span> weekend_FALSE,</span>
<span id="cb134-16"><a href="#cb134-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_change =</span> (difference <span class="sc">/</span> weekend_FALSE) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb134-17"><a href="#cb134-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb134-18"><a href="#cb134-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="fu">abs</span>(difference)))</span>
<span id="cb134-19"><a href="#cb134-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-20"><a href="#cb134-20" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(weekend_effect, </span>
<span id="cb134-21"><a href="#cb134-21" aria-hidden="true" tabindex="-1"></a>             <span class="at">digits =</span> <span class="dv">4</span>,</span>
<span id="cb134-22"><a href="#cb134-22" aria-hidden="true" tabindex="-1"></a>             <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Topic"</span>, <span class="st">"Weekday Gamma"</span>, <span class="st">"Weekend Gamma"</span>, </span>
<span id="cb134-23"><a href="#cb134-23" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Difference"</span>, <span class="st">"% Change"</span>),</span>
<span id="cb134-24"><a href="#cb134-24" aria-hidden="true" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">"Weekend Effect on Topic Prevalence"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: right;">Topic</th>
<th style="text-align: right;">Weekday Gamma</th>
<th style="text-align: right;">Weekend Gamma</th>
<th style="text-align: right;">Difference</th>
<th style="text-align: right;">% Change</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.1934</td>
<td style="text-align: right;">0.2030</td>
<td style="text-align: right;">0.0095</td>
<td style="text-align: right;">4.9179</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.2034</td>
<td style="text-align: right;">0.1976</td>
<td style="text-align: right;">-0.0058</td>
<td style="text-align: right;">-2.8552</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.2004</td>
<td style="text-align: right;">0.1983</td>
<td style="text-align: right;">-0.0021</td>
<td style="text-align: right;">-1.0606</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.2019</td>
<td style="text-align: right;">0.2008</td>
<td style="text-align: right;">-0.0011</td>
<td style="text-align: right;">-0.5343</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0.2009</td>
<td style="text-align: right;">0.2004</td>
<td style="text-align: right;">-0.0005</td>
<td style="text-align: right;">-0.2501</td>
</tr>
</tbody>
</table>
<p>Weekend Effect on Topic Prevalence</p>
<p>Based on the weekend vs.&nbsp;weekday analysis, we observe <strong>minimal but meaningful</strong> differences:</p>
<p><strong>Correlation Analysis Between Topics:</strong></p>
<ul>
<li><p><strong>Positive correlation (red)</strong>: Topics tend to increase together</p>
<ul>
<li>Might indicate general activity spikes (more comments = more of everything)</li>
</ul></li>
<li><p><strong>Negative correlation (blue)</strong>: Topics compete for attention</p>
<ul>
<li><p>When one increases, the other decreases</p></li>
<li><p>Suggests zero-sum competition for discourse space</p></li>
</ul></li>
<li><p><strong>Near-zero correlation (white)</strong>: Topics vary independently</p></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if topics compete or co-occur</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>topic_correlations <span class="ot">&lt;-</span> daily_topic_averages <span class="sc">|&gt;</span> </span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(date, topic, mean_gamma) <span class="sc">|&gt;</span> </span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> topic, <span class="at">values_from =</span> mean_gamma, </span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">"topic_"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>date) <span class="sc">|&gt;</span> </span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>()</span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-9"><a href="#cb135-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Display as heatmap</span></span>
<span id="cb135-10"><a href="#cb135-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span>
<span id="cb135-11"><a href="#cb135-11" aria-hidden="true" tabindex="-1"></a>cor_melted <span class="ot">&lt;-</span> <span class="fu">melt</span>(topic_correlations)</span>
<span id="cb135-12"><a href="#cb135-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-13"><a href="#cb135-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cor_melted, <span class="fu">aes</span>(<span class="at">x =</span> Var1, <span class="at">y =</span> Var2, <span class="at">fill =</span> value)) <span class="sc">+</span></span>
<span id="cb135-14"><a href="#cb135-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb135-15"><a href="#cb135-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(value, <span class="dv">2</span>)), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb135-16"><a href="#cb135-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">"blue"</span>, <span class="at">mid =</span> <span class="st">"white"</span>, <span class="at">high =</span> <span class="st">"red"</span>, </span>
<span id="cb135-17"><a href="#cb135-17" aria-hidden="true" tabindex="-1"></a>                       <span class="at">midpoint =</span> <span class="dv">0</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb135-18"><a href="#cb135-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb135-19"><a href="#cb135-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Topic Correlation Matrix"</span>,</span>
<span id="cb135-20"><a href="#cb135-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Do topics rise and fall together over time?"</span>,</span>
<span id="cb135-21"><a href="#cb135-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Topic"</span>,</span>
<span id="cb135-22"><a href="#cb135-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Topic"</span>,</span>
<span id="cb135-23"><a href="#cb135-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Correlation"</span></span>
<span id="cb135-24"><a href="#cb135-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb135-25"><a href="#cb135-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb135-26"><a href="#cb135-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="bigdata_L9-github_files/figure-gfm/unnamed-chunk-46-1.png" class="img-fluid"><!-- --></p>
<p><strong>Interpretation of Correlation Results:</strong></p>
<p>Based on the correlation matrix, we can identify three distinct patterns:</p>
<p><strong>1. Strong Competition: Controversy vs.&nbsp;Content (-0.85 and -0.77)</strong></p>
<ul>
<li><p><strong>Topic 1 (Music) ‚ÜîÔ∏é Topic 5 (HYBE)</strong>: r = -0.85 (very strong negative)</p></li>
<li><p><strong>Topic 4 (Groups) ‚ÜîÔ∏é Topic 5 (HYBE)</strong>: r = -0.77 (strong negative)</p></li>
</ul>
<p><strong>Meaning</strong>: When HYBE controversy discussion increases, music appreciation and group/industry discussion <strong>decrease proportionally</strong></p>
<p><strong>Interpretation</strong>:</p>
<ul>
<li><p>Zero-sum attention economy: controversy ‚Äúcrowds out‚Äù content discussion</p></li>
<li><p>Community has fixed attention capacity</p></li>
<li><p>Drama displaces substantive music/industry talk</p></li>
<li><p>Suggests controversy is <strong>disruptive</strong> to normal discourse patterns</p></li>
</ul>
<p><strong>2. Positive Co-occurrence: Content Topics (0.47)</strong></p>
<ul>
<li><strong>Topic 1 (Music) ‚ÜîÔ∏é Topic 4 (Groups)</strong>: r = 0.47 (moderate positive)</li>
</ul>
<p><strong>Meaning</strong>: When music appreciation increases, group/industry discussion <strong>also increases</strong></p>
<p><strong>Interpretation</strong>:</p>
<ul>
<li><p>Both are content-focused topics</p></li>
<li><p>Likely rise together during comeback periods (new music + charts/achievements)</p></li>
<li><p>High-activity days see more of both</p></li>
<li><p>Suggests these are <strong>complementary</strong> rather than competitive</p></li>
</ul>
<p><strong>3. Moderate Competition: Meta-Discussion (-0.59)</strong></p>
<ul>
<li><strong>Topic 2 (Discussions) ‚ÜîÔ∏é Topic 3 (Rules)</strong>: r = -0.59 (moderate negative)</li>
</ul>
<p><strong>Meaning</strong>: When fan meta-discussions increase, moderation messages <strong>decrease</strong></p>
<p><strong>Interpretation</strong>:</p>
<ul>
<li><p>When community is actively discussing (Topic 2), fewer posts are removed</p></li>
<li><p>Or: Heavy moderation (Topic 3) suppresses meta-discussion</p></li>
<li><p>Possible explanation: controversial meta-discussions trigger more removals</p></li>
</ul>
<p><strong>4. Weak/Neutral Relationships:</strong></p>
<ul>
<li><p><strong>Topic 2 (Discussions) ‚ÜîÔ∏é Topic 5 (HYBE)</strong>: r = 0.30 (weak positive)</p>
<ul>
<li>Fan discussions incorporate controversy but aren‚Äôt dominated by it</li>
</ul></li>
<li><p><strong>Topic 1 (Music) ‚ÜîÔ∏é Topic 2 (Discussions)</strong>: r = -0.37 (weak negative)</p>
<ul>
<li>Slight trade-off between music appreciation and fan meta-talk</li>
</ul></li>
<li><p><strong>Topic 3 (Rules) ‚ÜîÔ∏é Topic 4 (Groups)</strong>: r = 0.22 (weak positive)</p>
<ul>
<li>Industry news posts sometimes trigger moderation</li>
</ul></li>
<li><p><strong>Topic 2 (Discussions) ‚ÜîÔ∏é Topic 4 (Groups)</strong>: r = -0.13 (very weak)</p>
<ul>
<li>Nearly independent</li>
</ul></li>
</ul>
<p><strong>Key Research Findings:</strong></p>
<p><strong>1. Attention is Zero-Sum for Events</strong></p>
<ul>
<li><p>The -0.85 correlation between Music and HYBE is <strong>extremely strong</strong></p></li>
<li><p>Suggests community attention is a fixed pie</p></li>
<li><p>Controversy doesn‚Äôt expand discussion, it <strong>displaces</strong> other topics</p></li>
<li><p>When HYBE controversy peaked, music discussion was at its lowest</p></li>
</ul>
<p><strong>2. Content Topics are Complementary</strong></p>
<ul>
<li><p>The +0.47 correlation between Music and Groups shows they <strong>co-occur</strong></p></li>
<li><p>Active music discussion days = active industry discussion days</p></li>
<li><p>Suggests these topics feed each other (new releases ‚Üí chart performance)</p></li>
<li><p>Non-zero-sum: both can increase simultaneously</p></li>
</ul>
<p><strong>3. Moderation Reflects Discussion Patterns</strong></p>
<ul>
<li><p>Topic 3 (Rules) negatively correlates with both Discussion (-0.59) and Controversy (-0.51)</p></li>
<li><p>Suggests moderation is <strong>reactive</strong> to problematic content</p></li>
<li><p>When controversy or meta-discussion surge, moderation increases</p></li>
</ul>
<p><strong>4. Implications for Community Health:</strong></p>
<p><strong>Positive Sign:</strong> - Music and Groups topics are positively correlated (content-focused community)</p>
<p><strong>Concerning Sign:</strong></p>
<ul>
<li><p>Strong negative correlation with controversy suggests it <strong>disrupts</strong> normal patterns</p></li>
<li><p>Community loses content-focused discussion during drama periods</p></li>
<li><p>At r = -0.85, this is nearly a perfect trade-off</p></li>
</ul>
<p><strong>Statistical Note:</strong></p>
<p>These are <strong>Pearson correlations</strong> based on only 30 data points (days in July), so:</p>
<ul>
<li><p>Correlations &gt; 0.36 are statistically significant (p &lt; 0.05)</p></li>
<li><p>Correlations &gt; 0.46 are statistically significant (p &lt; 0.01)</p></li>
</ul>
<p><strong>Significant correlations in our data:</strong></p>
<ul>
<li><p>Topic 1 ‚ÜîÔ∏é Topic 5: -0.85 (p &lt; 0.001)</p></li>
<li><p>Topic 4 ‚ÜîÔ∏é Topic 5: -0.77 (p &lt; 0.001)</p></li>
<li><p>Topic 2 ‚ÜîÔ∏é Topic 3: -0.59 (p &lt; 0.001)</p></li>
<li><p>Topic 1 ‚ÜîÔ∏é Topic 4: 0.47 (p &lt; 0.01)</p></li>
<li><p>Topic 1 ‚ÜîÔ∏é Topic 2: -0.37 (p &lt; 0.05)</p></li>
</ul>
<p>All major patterns are statistically significant and not due to chance.</p>
<hr>
</section>
</section>
<section id="lecture-9-cheat-sheet-topic-modeling-lda" class="level2">
<h2 class="anchored" data-anchor-id="lecture-9-cheat-sheet-topic-modeling-lda">Lecture 9 Cheat Sheet: Topic Modeling (LDA)</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Function/Concept</strong></th>
<th><strong>Description</strong></th>
<th><strong>Code Example</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>LDA Concept</strong></td>
<td>Unsupervised ML technique that discovers latent topics. Each document = mixture of topics; each topic = mixture of words.</td>
<td>Two key principles:<br>1. Documents contain multiple topics<br>2. Topics contain multiple words</td>
</tr>
<tr class="even">
<td><strong>Document-Term Matrix (DTM)</strong></td>
<td>Rows = documents, columns = words, values = counts. Sparse matrix (mostly zeros).</td>
<td><code>cast_dtm(comment_index, word, n)</code></td>
</tr>
<tr class="odd">
<td><strong>Sparsity</strong></td>
<td>Percentage of matrix that is zeros. Text data is naturally 95%+ sparse.</td>
<td><code>tidy_dfm@Dim</code> shows dimensions</td>
</tr>
<tr class="even">
<td><strong>Language Detection</strong></td>
<td>Identify language of text using Google‚Äôs CLD2 package.</td>
<td><code>cld2::detect_language(data$text)</code></td>
</tr>
<tr class="odd">
<td><strong>Remove Duplicates</strong></td>
<td>Keep only unique texts to avoid bias from repeated content.</td>
<td><code>distinct(text, .keep_all = TRUE)</code></td>
</tr>
<tr class="even">
<td><strong>Custom Stopwords</strong></td>
<td>Combine multiple stopword sources + domain-specific terms.</td>
<td><code>c(stopwords("en"), stopwords(source = "smart"), "custom")</code></td>
</tr>
<tr class="odd">
<td><strong>TF-IDF Filtering</strong></td>
<td>Remove words that are too common (appear in &gt;75% of docs) or too rare (&lt;0.1% of docs).</td>
<td><code>doc_freq = n() / templength</code><br><code>filter(doc_freq &lt; maxndoc &amp; doc_freq &gt; minndoc)</code></td>
</tr>
<tr class="even">
<td><strong>Topic Coherence</strong></td>
<td>Measures how often top words in a topic co-occur. Higher (less negative) = better.</td>
<td><code>topic_coherence(lda_model, dtm)</code> from <code>topicdoc</code> package</td>
</tr>
<tr class="odd">
<td><strong>C_UMass Coherence</strong></td>
<td>Document co-occurrence based metric. Values are negative; closer to 0 is better.</td>
<td>Most common metric for topic quality</td>
</tr>
<tr class="even">
<td><strong>FindTopicsNumber()</strong></td>
<td>Tests multiple K values with different coherence metrics (CaoJuan, Deveaud).</td>
<td><code>FindTopicsNumber(dtm, topics = seq(2, 20, 1), metrics = c("CaoJuan2009"))</code></td>
</tr>
<tr class="odd">
<td><strong>CaoJuan2009</strong></td>
<td>Minimize this metric. Lower = topics are more distinct.</td>
<td>Shows steady decline, minimum = optimal K</td>
</tr>
<tr class="even">
<td><strong>Deveaud2014</strong></td>
<td>Maximize this metric. Higher = better topic divergence. Often noisy.</td>
<td>More variable than CaoJuan</td>
</tr>
<tr class="odd">
<td><strong>Choosing K</strong></td>
<td>Balance coherence (quality) with interpretability. Look for ‚Äúelbow‚Äù in coherence plot.</td>
<td>K=5 had best coherence (-160.46) in our example</td>
</tr>
<tr class="even">
<td><strong>LDA()</strong></td>
<td>Train LDA model using Gibbs sampling method.</td>
<td><code>LDA(dtm, k = 5, method = "Gibbs", control = list(seed = 42, iter = 2000))</code></td>
</tr>
<tr class="odd">
<td><strong>LDA Parameters</strong></td>
<td><code>k</code>: number of topics<br><code>iter</code>: iterations to run<br><code>burnin</code>: discard first N iterations<br><code>seed</code>: reproducibility</td>
<td><code>control = list(verbose = 500, seed = 42, iter = 2000, burnin = 500)</code></td>
</tr>
<tr class="even">
<td><strong>Beta (Œ≤) Matrix</strong></td>
<td>Topic-word probabilities. Dimensions: Topics √ó Words (5 √ó 2,683). Shows which words define each topic.</td>
<td><code>tidy(lda_model, matrix = "beta")</code></td>
</tr>
<tr class="odd">
<td><strong>Gamma (Œ≥) Matrix</strong></td>
<td>Document-topic probabilities. Dimensions: Documents √ó Topics (22,316 √ó 5). Shows which topics appear in each document.</td>
<td><code>tidy(lda_model, matrix = "gamma")</code></td>
</tr>
<tr class="even">
<td><strong>slice_max()</strong></td>
<td>Get top N rows by a value. Used to find top words per topic.</td>
<td><code>group_by(topic) |&gt; slice_max(beta, n = 10)</code></td>
</tr>
<tr class="odd">
<td><strong>reorder_within()</strong></td>
<td>Reorder terms within each facet for better visualization.</td>
<td><code>mutate(term = reorder_within(term, beta, topic))</code></td>
</tr>
<tr class="even">
<td><strong>scale_y_reordered()</strong></td>
<td>Scale y-axis for faceted plots with reorder_within().</td>
<td>Pairs with <code>reorder_within()</code> in faceted plots</td>
</tr>
<tr class="odd">
<td><strong>Log Ratio Comparison</strong></td>
<td>log2(topic2_beta / topic1_beta). Positive = more associated with topic2; negative = more associated with topic1.</td>
<td><code>mutate(log_ratio = log2(topic2 / topic1))</code></td>
</tr>
<tr class="even">
<td><strong>Interpreting Beta</strong></td>
<td>Higher beta = word is more important to that topic. Compare relative values across topics, not absolute.</td>
<td>Œ≤ = 0.043 for ‚Äúsong‚Äù in Topic 1 is very high</td>
</tr>
<tr class="odd">
<td><strong>Interpreting Gamma</strong></td>
<td>Gamma values sum to 1.0 per document. Gamma &gt; 0.5 = clear dominant topic; gamma &lt; 0.5 = mixed topics.</td>
<td>Document with [0.25, 0.24, 0.21, 0.18, 0.12] is mixed</td>
</tr>
<tr class="even">
<td><strong>Dominant Topic</strong></td>
<td>Topic with highest gamma for a document. Useful for categorizing documents.</td>
<td><code>group_by(document) |&gt; slice_max(gamma, n = 1)</code></td>
</tr>
<tr class="odd">
<td><strong>Representative Documents</strong></td>
<td>Documents with highest gamma for each topic. Best examples of ‚Äúpure‚Äù topics.</td>
<td>Gamma &gt; 0.7 = very pure (e.g., template text)</td>
</tr>
<tr class="even">
<td><strong>Topic Distribution</strong></td>
<td>Count how many documents belong primarily to each topic.</td>
<td><code>count(topic) |&gt; mutate(percentage = n/sum(n)*100)</code></td>
</tr>
<tr class="odd">
<td><strong>Temporal Analysis</strong></td>
<td>Track how topic prevalence changes over time using average gamma by date.</td>
<td><code>group_by(date, topic) |&gt; summarize(mean_gamma = mean(gamma))</code></td>
</tr>
<tr class="even">
<td><strong>LOESS Smoothing</strong></td>
<td>Smooth noisy time series to reveal underlying trends.</td>
<td><code>geom_smooth(method = "loess", span = 0.3)</code></td>
</tr>
<tr class="odd">
<td><strong>Weekend Effect</strong></td>
<td>Compare topic prevalence on weekends vs.&nbsp;weekdays.</td>
<td><code>mutate(is_weekend = weekday %in% c("Saturday", "Sunday"))</code></td>
</tr>
<tr class="even">
<td><strong>Topic Correlation</strong></td>
<td>Correlation between topics‚Äô daily prevalence. Positive = co-occur; negative = compete.</td>
<td><code>pivot_wider(names_from = topic) |&gt; cor()</code></td>
</tr>
<tr class="odd">
<td><strong>Zero-Sum Attention</strong></td>
<td>Strong negative correlation (r &lt; -0.7) means topics compete for attention.</td>
<td>Topic 1 ‚ÜîÔ∏é Topic 5: r = -0.85 (very strong competition)</td>
</tr>
<tr class="even">
<td><strong>Complementary Topics</strong></td>
<td>Positive correlation (r &gt; 0.4) means topics rise together.</td>
<td>Topic 1 ‚ÜîÔ∏é Topic 4: r = 0.47 (content topics co-occur)</td>
</tr>
<tr class="odd">
<td><strong>Validation Strategy</strong></td>
<td>Check if high-gamma documents match beta-based topic interpretations.</td>
<td>Examine top 3 docs per topic for thematic consistency</td>
</tr>
<tr class="even">
<td><strong>Template Detection</strong></td>
<td>Very high gamma (&gt;0.7) often indicates formulaic/template text (mod messages).</td>
<td>Can filter out for organic discourse analysis</td>
</tr>
<tr class="odd">
<td><strong>Data Loss Tracking</strong></td>
<td>Track documents removed at each preprocessing step.</td>
<td>Original ‚Üí Language filter ‚Üí Deduplication ‚Üí TF-IDF filter</td>
</tr>
<tr class="even">
<td><strong>Memory Management</strong></td>
<td>Remove unused objects and run garbage collection for large models.</td>
<td><code>rm(list = setdiff(ls(), keep_objects))</code><br><code>gc()</code></td>
</tr>
<tr class="odd">
<td><strong>Save Workspace</strong></td>
<td>Save entire workspace or specific objects for later use.</td>
<td><code>save.image("file.RData")</code><br><code>save(lda_model, file = "model.RData")</code></td>
</tr>
<tr class="even">
<td><strong>Interpretation Principle</strong></td>
<td>Topics are probabilistic and mixed. No document is purely one topic. Focus on relative probabilities.</td>
<td>Most documents have gamma &lt; 0.5 for dominant topic</td>
</tr>
<tr class="odd">
<td><strong>Quality Indicators</strong></td>
<td>‚úÖ High coherence<br>‚úÖ Distinct topics (minimal word overlap)<br>‚úÖ Interpretable themes<br>‚úÖ Representative docs match beta words</td>
<td>K=5 achieved all quality criteria in example</td>
</tr>
<tr class="even">
<td><strong>Common Pitfall</strong></td>
<td>Interpreting gamma as hard categories. Documents are mixtures!</td>
<td>Document [0.28, 0.23, 0.21, 0.18, 0.10] isn‚Äôt ‚ÄúTopic 1‚Äù</td>
</tr>
<tr class="odd">
<td><strong>Research Applications</strong></td>
<td>Content categorization, trend analysis, event detection, community discourse structure, attention dynamics.</td>
<td>Used to answer ‚ÄúWhat do fans discuss?‚Äù and ‚ÄúHow does discourse shift over time?‚Äù</td>
</tr>
</tbody>
</table>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>¬© 2026 Ayse D. Lokmanoglu, Boston University</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:alokman@bu.edu">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/aysedeniz09">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>